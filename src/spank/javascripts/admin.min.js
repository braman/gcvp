function save(e){var t=e.toLowerCase();var n="modal"+e;var r={action:"admin"};var i=jQuery("#"+t+"Login");console.log(i);var s="createUser";if(i.attr("disabled")){s="editUser"}var o=jQuery("#"+t+"Password").val();var u=jQuery("#"+t+"Lanes").val();r.role=t.toUpperCase();console.log("1111111111111111111111");console.log(u);var a=new Array;jQuery(u).each(function(e){var t=u[e];jQuery(_users).each(function(n){var r=_users[n];jQuery(r.lanesRu).each(function(n){if(r.lanesRu[n]==t){a[e]=r.lanes[n]}})})});console.log(a);if(n=="modalQuestion"){console.log("modalQuestion");r.questionId=questionEdit;r.question=jQuery("#question").val();r.answer1=jQuery("#answer1").val();r.answer2=jQuery("#answer2").val();r.answer3=jQuery("#answer3").val();r.answer4=jQuery("#answer4").val();r.answer5=jQuery("#answer5").val();r.id1=answersId[0];r.id2=answersId[1];r.id3=answersId[2];r.id4=answersId[3];r.id5=answersId[4];if(questionEdit>0){s="editUser";answersId=new Array(0,0,0,0,0);questionEdit=0}$("#modalQuestion").foundation("reveal","close")}else if(n=="modalLane"){console.log("modalLane");r.startRange=jQuery("#"+t+"StartRange").val();r.endRange=jQuery("#"+t+"EndRange").val();r.color=jQuery("#"+t+"Color").val();r.kk=jQuery("#"+t+"KK").val();r.en=jQuery("#"+t+"EN").val();r.ru=jQuery("#"+t+"RU").val();$("#modalLane").foundation("reveal","close")}else if(n=="modalUnit"){console.log("modal unit");r.firstname=jQuery("#"+t+"Firstname").val();r.lastname=jQuery("#"+t+"Lastname").val();r.lanes=a;if(jQuery("#unitSecondMonitor").val()!="null"){r.secondMonitor=jQuery("#unitSecondMonitor").val()}console.log(r.secondMonitor);$("#modalUnit").foundation("reveal","close")}else if(n=="modalDashboard"){r.lanes=a;$("#modalDashboard").foundation("reveal","close")}else if(n=="modalSecondMonitor"){r.role="SECOND_MONITOR";$("#modalSecondMonitor").foundation("reveal","close")}else if(n=="modalKiosk"){var f=new Array;jQuery("#modalKiosk table tr").each(function(){var e=jQuery(this).find("td:eq(0)").text();var t=jQuery(this).find("td:eq(1)").text();var n=jQuery(this).find("td:eq(2)").text().split(",");var r=new Array;console.log("--------------------------------");jQuery(n).each(function(e){jQuery(_users).each(function(t){var i=_users[t];if(i.role=="LANE"){if(i.ru==n[e]){r[e]=i.user;console.log(r[e])}}})});f.push({kk:e,ru:t,sublanes:r})});r.mainLanes=f;$("#modalKiosk").foundation("reveal","close")}r.type=s;r.username=i.val();r.password=o==undefined?"":o;console.log(_group);r.group=selectedGroup;console.log(r);XmppClient.send("queue",JSON.stringify(r))}function saveHoliday(){msg={action:"admin_holiday",date:jQuery("#date").val(),time:jQuery("#time").val(),group_name:jQuery("#groups_select").val()};XmppClient.send("queue",JSON.stringify(msg))}function _init(e){console.log("init admin");jQuery("head").append(jQuery("<meta name='viewport' content='width=device-width, initial-scale=1.0'><link rel='stylesheet' href='stylesheets/normalize.css' /><link rel='stylesheet' href='stylesheets/app.css' /><link rel='stylesheet' href='stylesheets/foundation-datepicker.css'>"));document.title="CQ - Administrator";_initData=e;_datadata=_initData;console.log(e);location.href="#!admin";selectedGroup=_group;console.log(selectedGroup);if(e.lang){_lang=e.lang;var t="";console.log("Lang: "+_lang);if(_lang=="kk"){kk_ru=_kk}else if(_lang=="ru"){kk_ru=_ru}else if(_lang=="en"){kk_ru=_en}}var n=new Array;var r="";if(e.questions){console.log(e.answers);jQuery(e.questions).each(function(t){var n=e.questions[t];r+="<tr><td><a class='edit editQuestion' data-lane='"+n.id+"'>"+n.question+"</a></td></tr>"});jQuery("#questions tbody").html(r)}jQuery(".settings").append(kk_ru.settings);jQuery("#help").append(kk_ru.help);jQuery("#logoutLink").append(kk_ru.quit);jQuery(".lanes_label").append(kk_ru.lanes);jQuery("#units_title").append(kk_ru.unitsTab);jQuery("#dashboards_title").append(kk_ru.dashboardsTab);jQuery("#second_monitor").append(kk_ru.modal.secondMonitor.title);jQuery("#filials").append(kk_ru.filials);jQuery("#lane").append(kk_ru.laneUsername);jQuery("#startN").append(kk_ru.laneStartRange);jQuery("#endN").append(kk_ru.laneEndRange);jQuery("#color").append(kk_ru.laneColor);jQuery("#newLane").append(kk_ru.createLane);jQuery("#kiosks_title").append(kk_ru.kiosksTab);jQuery("#logos_title").append(kk_ru.logosTabHeader);jQuery("#templates_title").append(kk_ru.templatesTab);jQuery(".account").append(kk_ru.account);jQuery(".question").text(kk_ru.question);jQuery(".answer1").text(kk_ru.answer1);jQuery(".answer2").text(kk_ru.answer2);jQuery(".answer3").text(kk_ru.answer3);jQuery(".answer4").text(kk_ru.answer4);jQuery(".answer5").text(kk_ru.answer5);jQuery("#unit_lanes").append(kk_ru.unitLanes);jQuery("#newUnit").append(kk_ru.createUnit);jQuery("#dashboard_lanes").append(kk_ru.dashboardLanes);jQuery("#newDashboard").append(kk_ru.createDashboard);jQuery("#newSecondMonitor").append(kk_ru.newSecondMonitor);jQuery("#newKiosk").append(kk_ru.createKiosk);jQuery("#newQuestion").text(kk_ru.createQuestion);jQuery("#logosButton").append(kk_ru.saveChanges);jQuery("#templatesButton").append(kk_ru.saveChanges);jQuery("#weekendsButton").append(kk_ru.saveChanges);jQuery("#unit_title").append(kk_ru.unit+":");jQuery("#unit_title1").append(kk_ru.unit+":");jQuery("#kiosk_title").append(kk_ru.kiosk+":");jQuery("#kiosk_title1").append(kk_ru.kiosk+":");jQuery("#anketa_title").text(kk_ru.anketa+":");jQuery("#ticket_title").append(kk_ru.ticket+":");jQuery("#ticket_title1").append(kk_ru.ticket+":");jQuery("#dashboard_title").append(kk_ru.dashboard+":");jQuery("#dashboard_title1").append(kk_ru.dashboard+":");jQuery("#weekends_title").append(kk_ru.weekends_title);jQuery("#modal_lane_title").append(kk_ru.modal.lane.title);jQuery("#modal_lane_header").append(kk_ru.modal.lane.header);jQuery("#modal_quesiion_header").text(kk_ru.modal.anketa.header);jQuery("#modal_question_title").text(kk_ru.modal.anketa.title);jQuery(".username").append(kk_ru.username+":");jQuery(".login_help").append(kk_ru.loginHelp);jQuery("#lane_start_range").append(kk_ru.laneStartRange+":");jQuery("#lane_end_range").append(kk_ru.laneEndRange+":");jQuery("#lane_color").append(kk_ru.laneColor+":");jQuery("#lane_ru").append(kk_ru.laneRU+":");jQuery("#lane_kk").append(kk_ru.laneKK+":");jQuery("#lane_en").append(kk_ru.laneEN+":");jQuery(".close").append(kk_ru.close);jQuery(".save").append(kk_ru.saveChanges);jQuery("#modal_unit_title").append(kk_ru.modal.unit.title);jQuery("#modal_unit_header").append(kk_ru.modal.unit.header);jQuery(".password").append(kk_ru.password+":");jQuery("#firstname").append(kk_ru.firstname+":");jQuery("#last_name").append(kk_ru.lastname+":");jQuery(".second_monitor").append(kk_ru.modal.secondMonitor.title);jQuery("#lanes_title").append(kk_ru.lanes+":");jQuery("#modal_dashboard_title").append(kk_ru.modal.dashboard.title);jQuery("#modal_dashboard_header").append(kk_ru.modal.dashboard.header);jQuery("#modal_secondMonitor_header").append(kk_ru.modal.secondMonitor.header);jQuery("#modal_kiosk_title").append(kk_ru.modal.kiosk.title);jQuery("#modal_kiosk_header1").append(kk_ru.modal.kiosk.header1);jQuery("#main_lane_kk").append(kk_ru.mainLaneKK+":");jQuery("#main_lane_ru").append(kk_ru.mainLaneRU+":");jQuery("#createMainLaneBtn").append(kk_ru.create);jQuery("#modal_kiosk_header2").append(kk_ru.modal.kiosk.header2);jQuery("#main_lanes").append(kk_ru.mainLanes+":");jQuery("#kiosk_help").append(kk_ru.kioskHelp);XmppClient.send("queue",JSON.stringify({action:"loadGroup",group:_group}));jQuery("#createMainLaneBtn").click(function(){jQuery("#modalKiosk table").append("<tr><td>"+jQuery("#mainlaneKK").val()+"</td><td>"+jQuery("#mainlaneRU").val()+"</td><td>"+jQuery("#modalKiosk select").val()+"</td><td><a href='#' class='deleteLink'>{{deleteLink}}</a></td></tr>");jQuery(".deleteLink").click(function(){jQuery(this).parent().parent().remove()});return false});jQuery("#templatesButton").click(function(){var e=new Array;jQuery("#templates textarea").each(function(){e.push({data:jQuery(this).val(),role:jQuery(this).attr("id").replace("template","")})});XmppClient.send("queue",JSON.stringify({action:"admin",type:"updateTemplates",templates:e,group:_group}))});jQuery("#logosButton").click(function(){XmppClient.send("queue",JSON.stringify({action:"admin",type:"updatePictures",kioskLogo:jQuery("#kioskLogo").val(),ticketLogo:jQuery("#ticketLogo").val(),dashboardLogo:jQuery("#dashboardLogo").val()}));return false});jQuery("#newLane").click(function(){jQuery("#laneLogin").attr("disabled",false);jQuery("#laneLogin").val("");jQuery("#laneColor").val("");jQuery("#laneKK").val("");jQuery("#laneRU").val("");jQuery("#laneEn").val("");jQuery("#laneStartRange").val("");jQuery("#laneEndRange").val("");$("#modalLane").foundation("reveal","open");return false});jQuery("#newUnit").click(function(){console.log("new unit");jQuery("select[class=lanes] option").removeAttr("selected");jQuery("#unitLogin").val("");jQuery("#unitLogin").attr("disabled",false);jQuery("#unitFirstname").val();jQuery("#unitLastname").val();$("#modalUnit").foundation("reveal","open");return false});jQuery("#newDashboard").click(function(){jQuery("select[class=lanes] option").removeAttr("selected");jQuery("#dashboardLogin").val();jQuery("#dashboardLogin").attr("disabled",false);$("#modalDashboard").foundation("reveal","open");return false});jQuery("#newSecondMonitor").click(function(){jQuery("select[class=lanes] option").removeAttr("selected");jQuery("#secondMonitorLogin").val();jQuery("#secondMonitorLogin").attr("disabled",false);$("#modalSecondMonitor").foundation("reveal","open");return false});jQuery("#newKiosk").click(function(){console.log("new Kiosk");jQuery("#modalKiosk table").empty();jQuery("#kioskLogin").val();jQuery("#kioskLogin").attr("disabled",false);$("#modalKiosk").foundation("reveal","open");return false});jQuery("#newQuestion").click(function(){console.log("new Question");$("#modalQuestion").foundation("reveal","open");return false});jQuery(".modal").on("hide",function(){jQuery(".modal input").val("");jQuery("select[class=lanes] option").removeAttr("selected")});jQuery("#templates_title").click(function(){XmppClient.send("queue",JSON.stringify({action:"loadTemplates",group:_group}))})}function getUser(e){var t=null;jQuery(_users).each(function(n){if(_users[n].user==e){t=_users[n]}});return t}function nvl(e,t){if(e==undefined||e==null){if(t){return t}else{return""}}return e}function _onMessage(e){msg1={};try{msg1=JSON.parse(e)}catch(t){console.log("admin got non-JSON message:"+e)}console.log(msg1);console.log(_group);if(msg1.username){jQuery("#username").text(msg1.username)}if(msg1.groups&&selectedGroup==_group){_groups=msg1.groups;jQuery("#customDropdown1").empty();jQuery("#customDropdown1").append("<option DISABLED>"+kk_ru.chooseFilial+":</option>");jQuery(_groups).each(function(e){var t=_groups[e];if(msg1.group==t.name){jQuery("#customDropdown1").append("<option selected='selected' value='"+t.name+"'>"+t.address+"</option>")}else{jQuery("#customDropdown1").append("<option value='"+t.name+"'>"+t.address+"</option>")}jQuery("#groups_select").append('<option style="color:black;" value="'+t.name+'">'+t.address+"</option>")})}if(msg1.questions){var n="";console.log(msg1.answers);jQuery(msg1.questions).each(function(e){var t=msg1.questions[e];n+="<tr><td><a class='edit editQuestion' data-lane='"+t.id+"'>"+t.question+"</a></td></tr>"});jQuery("#questions tbody").html(n)}$(".editQuestion").click(function(){var e=$(this).attr("data-lane");questionEdit=e;console.log(e);var t=new Array("","","","","");var n=0;var r=0;var i="";var s=false;$(msg1.questions).each(function(s){var o=msg1.questions[s];if(o.id==e){i=o.question;$(o.answersName).each(function(e){var r=o.answersName[e];t[n++]=r.Aname});$(o.answersId).each(function(e){var t=o.answersId[e];answersId[r++]=t.AId})}});jQuery("#question").val(i);jQuery("#answer1").val(t[0]);jQuery("#answer2").val(t[1]);jQuery("#answer3").val(t[2]);jQuery("#answer4").val(t[3]);jQuery("#answer5").val(t[4]);$("#modalQuestion").foundation("reveal","open");return false});if(msg1.users){_secondMonitor=[];msg1.users.sort(function(e,t){return e.user.localeCompare(t.user)});_users=msg1.users;jQuery("select[class=lanes] option").remove();var n={dashboard:"",unit:"",kiosk:"",lane:"",secondMonitor:""};var r=0;jQuery(msg1.users).each(function(e){var t=msg1.users[e];if(t.role=="UNIT"){_count[r]=t.user;_status[r]="enabled";console.log("EL.USER: "+_count[r]+": "+r);jQuery("#unitSecondMonitor").empty();var i="";jQuery(t.lanesRu).each(function(e){i+=t.lanesRu[e]+", "});var s="<tr><td>"+"<a class='edit editUnit' data-lane='"+t.user+"'>"+t.user+" ("+t.firstname+" "+t.lastname+")"+"</a></td><td>"+i.substring(0,i.length-2)+"</td><td>"+"<button class='btn btn-danger btn-medium disableUser' type='button' username='"+t.user+"'><p id='"+r+"'>"+kk_ru.disable+"</p></button>"+"</td></tr>";console.log(t.status);if(t.status=="DISABLED"){s=s.replace("disableUser","enableUser").replace(kk_ru.disable,kk_ru.enable);_status[r]="disabled";console.log(r+" "+kk_ru.enable)}n.unit+=s}else if(t.role=="DASHBOARD"){_count[r]=t.user;_status[r]="enabled";console.log("EL.USER: "+_count[r]+": "+r);var i="";jQuery(t.lanesRu).each(function(e){i+=t.lanesRu[e]+","});var s="<tr><td><a class='edit editDashboard'>"+t.user+"</a></td><td>"+i.substring(0,i.length-1)+"</td>"+"<td><button class='btn btn-danger btn-medium disableUser' type='button' username='"+t.user+"'><p id='"+r+"'>"+kk_ru.disable+"</p></button></td></tr>";if(t.status=="DISABLED"){s=s.replace("disableUser","enableUser").replace(kk_ru.disable,kk_ru.enable).replace("danger","success");_status[r]="disabled"}n.dashboard+=s}else if(t.role=="SECOND_MONITOR"){_count[r]=t.user;_status[r]="enabled";console.log("EL.USER: "+_count[r]+": "+r);_secondMonitor.push(t.user);var i="";jQuery(t.lanesRu).each(function(e){i+=t.lanesRu[e]+","});var s="<tr><td><a class='edit editSecondMonitor'>"+t.user+"</a></td>"+"<td><button class='btn btn-danger btn-medium disableUser' type='button' username='"+t.user+"'><p id='"+r+"'>"+kk_ru.disable+"</p></button></td></tr>";if(t.status=="DISABLED"){s=s.replace("disableUser","enableUser").replace(kk_ru.disable,kk_ru.enable).replace("danger","success");_status[r]="disabled"}n.secondMonitor+=s}else if(t.role=="KIOSK"){_count[r]=t.user;_status[r]="enabled";console.log("EL.USER: "+_count[r]+": "+r);var s="<tr><td><a class='edit editKiosk' data-lane='"+t.user+"'>"+t.user+"</a></td>"+"<td><button class='btn btn-danger btn-medium disableUser' type='button' username='"+t.user+"'><p id='"+r+"'>"+kk_ru.disable+"</p></button></td></tr>";if(t.status=="DISABLED"){s=s.replace("disableUser","enableUser").replace(kk_ru.disable,kk_ru.enable).replace("danger","success");_status[r]="disabled"}n.kiosk+=s}else if(t.role=="LANE"){_count[r]=t.user;_status[r]="enabled";console.log("EL.USER: "+_count[r]+": "+r);_lanes+=t;var s="<tr><td><a class='edit editLane' data-lane='"+t.user+"'>"+t.user+" ("+t.ru+")"+"</a></td>"+"<td>"+nvl(t.startRange,0)+"</td>"+"<td>"+nvl(t.endRange,0)+"</td>"+"<td>"+nvl(t.color)+"</td>"+"<td><button class='btn btn-danger btn-medium disableUser' type='button' username='"+t.user+"'><p id='"+r+"'>"+kk_ru.disable+"</p></button></td></tr>";if(t.status=="DISABLED"){s=s.replace("disableUser","enableUser").replace(kk_ru.disable,kk_ru.enable).replace("danger","success");jQuery("select[class=lanes]").append("<option disabled value='"+t.ru+"'>"+t.ru+"</option>");_status[r]="disabled"}else{jQuery("select[class=lanes]").append("<option value='"+t.ru+"'>"+t.ru+"</option>")}n.lane+=s}if(_count[r]!=null)r++;jQuery("#units tbody").html(n.unit);jQuery("#kiosks tbody").html(n.kiosk);jQuery("#dashboards tbody").html(n.dashboard);jQuery("#secondMonitor tbody").html(n.secondMonitor);jQuery("#lanes tbody").html(n.lane);jQuery(".edit").css("cursor","pointer")});jQuery(".editUnit").click(function(){jQuery("select[class=lanes] option").removeAttr("selected");var e=getUser(jQuery(this).attr("data-lane"));console.log(e);jQuery("#unitLogin").val(e.user);jQuery("#unitLogin").attr("disabled","");jQuery("#unitFirstname").val(e.firstname);jQuery("#unitLastname").val(e.lastname);jQuery(e.lanesRu).each(function(t){jQuery("option[value='"+e.lanesRu[t]+"']").attr("selected","selected")});jQuery("#unitSecondMonitor").empty();console.log(_users);jQuery("#unitSecondMonitor").append("<option value='null'>"+kk_ru.choose_second_monitor+":</option>");jQuery(_users).each(function(t){if(_users[t].role=="SECOND_MONITOR"){if(_users[t].user==e.secondMonitor){jQuery("#unitSecondMonitor").append("<option selected='selected' value='"+_users[t].user+"'>"+_users[t].user+"</option>")}else{var n=false;jQuery(_users).each(function(e){if(_users[e].role=="UNIT"){if(_users[e].secondMonitor==_users[t].user){n=true}}});if(!n){jQuery("#unitSecondMonitor").append("<option value='"+_users[t].user+"'>"+_users[t].user+"</option>")}}}});$("#modalUnit").foundation("reveal","open");return false});jQuery(".editLane").click(function(){var e=getUser(jQuery(this).attr("data-lane"));jQuery("#laneLogin").val(e.user);jQuery("#laneLogin").attr("disabled","");jQuery("#laneColor").val(e.color);jQuery("#laneKK").val(e.kk);jQuery("#laneEN").val(e.en);jQuery("#laneRU").val(e.ru);jQuery("#laneStartRange").val(e.startRange);jQuery("#laneEndRange").val(e.endRange);$("#modalLane").foundation("reveal","open");return false});jQuery(".editDashboard").click(function(){jQuery("select[class=lanes] option").removeAttr("selected");var e=getUser(jQuery(this).text());console.log(e);jQuery("#dashboardLogin").val(e.user);jQuery("#dashboardLogin").attr("disabled","");jQuery(e.lanesRu).each(function(t){jQuery("option[value='"+e.lanesRu[t]+"']").attr("selected","selected")});$("#modalDashboard").foundation("reveal","open");return false});jQuery(".editSecondMonitor").click(function(){var e=getUser(jQuery(this).text());console.log(e);jQuery("#secondMonitorLogin").val(e.user);jQuery("#secondMonitorLogin").attr("disabled","");$("#modalSecondMonitor").foundation("reveal","open");return false});jQuery(".editKiosk").click(function(){jQuery("#modalKiosk table").empty();console.log("editKiosk");var e=getUser(jQuery(this).attr("data-lane"));console.log(e);jQuery("#kioskLogin").val(e.user);if(e.data){var t=e.data.replace(/&(lt|gt|quot|apos);/g,function(e,t){return t=="lt"?"<":t=="gt"?">":t=="apos"?"'":'"'});_laneTree=JSON.parse(t);console.log(_laneTree);jQuery(_laneTree).each(function(e){var t=_laneTree[e];var n="";jQuery(t.sublanes).each(function(e){jQuery(_users).each(function(r){var i=_users[r];if(i.role=="LANE"){console.log(i);if(i.user==t.sublanes[e]){n+=i.ru+","}}})});console.log(n);jQuery("#modalKiosk table").append("<tr><td>"+t.kk+"</td><td>"+t.ru+"</td><td>"+n.substring(0,n.length-1)+"</td><td><a href='#' class='deleteLink'>{{deleteLink}}</a></td></tr>");jQuery(".deleteLink").click(function(){jQuery(this).parent().parent().remove()})})}jQuery("#kioskLogin").attr("disabled","");$("#modalKiosk").foundation("reveal","open")});jQuery(".enableUser").click(function(){XmppClient.send("queue",JSON.stringify({action:"admin",type:"enableUser",username:jQuery(this).attr("username"),group:_group}))});jQuery(".disableUser").click(function(){console.log("disable user");XmppClient.send("queue",JSON.stringify({action:"admin",type:"disableUser",username:jQuery(this).attr("username"),group:_group}))});jQuery("#kioskLogo").val(msg1.kioskLogo);jQuery("#dashboardLogo").val(msg1.dashboardLogo);jQuery("#ticketLogo").val(msg1.ticketLogo)}if(msg1.result&&msg1.result=="success"){console.log(_group);XmppClient.send("queue",JSON.stringify({action:"loadGroup",group:selectedGroup}))}if(msg1.templates){jQuery(msg1.templates).each(function(e){var t=msg1.templates[e].html.replace(/&(lt|gt|quot|apos);/g,function(e,t){return t=="lt"?"<":t=="gt"?">":t=="apos"?"'":'"'});jQuery("#template"+msg1.templates[e].role).val(t)})}}function goToFilial(){group=jQuery("#customDropdown1").val();XmppClient.send("queue",JSON.stringify({action:"loadGroup",group:group}))}function getSettings(){jQuery("#messageBody").html("<p>"+kk_ru.choose_lang+"</p>"+'<label for="ru_lang"><input type="radio" id="ru_lang" name="lang" value="ru" />Русский</label>'+'<label for="kk_lang"><input type="radio" id="kk_lang" name="lang" value="kk" />Казахский</label>'+'<label for="en_lang"><input type="radio" id="en_lang" name="lang" value="en" />English</label>');$("#message").foundation("reveal","open")}function change_lang(){var e=document.getElementsByName("lang");for(var t=0;t<e.length;t++){if(e[t].checked){_lang=e[t].value}}if(_lang=="kk"){kk_ru=_kk}else if(_lang=="ru"){kk_ru=_ru}else if(_lang=="en"){kk_ru=_en}jQuery("#help").empty();jQuery("#help").append(kk_ru.help);jQuery(".settings").empty();jQuery(".settings").append(kk_ru.settings);jQuery("#logoutLink").empty();jQuery("#logoutLink").append(kk_ru.quit);jQuery(".lanes_label").empty();jQuery(".lanes_label").append(kk_ru.lanes);jQuery("#units_title").empty();jQuery("#units_title").append(kk_ru.unitsTab);jQuery("#dashboards_title").empty();jQuery("#dashboards_title").append(kk_ru.dashboardsTab);jQuery("#second_monitor").empty();jQuery("#second_monitor").append(kk_ru.modal.secondMonitor.title);jQuery("#filials").empty();jQuery("#filials").append(kk_ru.filials);jQuery("#lane").empty();jQuery("#lane").append(kk_ru.laneUsername);jQuery("#startN").empty();jQuery("#startN").append(kk_ru.laneStartRange);jQuery("#endN").empty();jQuery("#endN").append(kk_ru.laneEndRange);jQuery("#color").empty();jQuery("#color").append(kk_ru.laneColor);jQuery("#newLane").empty();jQuery("#newLane").append(kk_ru.createLane);jQuery("#kiosks_title").empty();jQuery("#kiosks_title").append(kk_ru.kiosksTab);jQuery("#logos_title").empty();jQuery("#logos_title").append(kk_ru.logosTabHeader);jQuery("#anketa_title").text(kk_ru.anketaTabHeader);jQuery("#templates_title").empty();jQuery("#templates_title").append(kk_ru.templatesTab);jQuery("#weekends_title").empty();jQuery("#weekends_title").append(kk_ru.weekends_title);jQuery(".account").empty();jQuery(".account").append(kk_ru.account);jQuery(".question").append(kk_ru.question);jQuery(".answer1").append(kk_ru.answer1);jQuery(".answer2").append(kk_ru.answer2);jQuery(".answer3").append(kk_ru.answer3);jQuery(".answer4").append(kk_ru.answer4);jQuery(".answer5").append(kk_ru.answer5);jQuery("#kiosk_title").empty();jQuery("#kiosk_title").append(kk_ru.kiosk+":");jQuery("#kiosk_title1").empty();jQuery("#kiosk_title1").append(kk_ru.kiosk+":");jQuery("#unit_lanes").empty();jQuery("#unit_lanes").append(kk_ru.unitLanes);jQuery("#newUnit").empty();jQuery("#newUnit").append(kk_ru.createUnit);jQuery("#dashboard_lanes").empty();jQuery("#dashboard_lanes").append(kk_ru.dashboardLanes);jQuery("#newDashboard").empty();jQuery("#newDashboard").append(kk_ru.createDashboard);jQuery("#newSecondMonitor").empty();jQuery("#newSecondMonitor").append(kk_ru.newSecondMonitor);jQuery("#newKiosk").empty();jQuery("#newKiosk").append(kk_ru.createKiosk);jQuery("#newQuestion").append(kk_ru.createQuestion);jQuery("#ticket_title").empty();jQuery("#ticket_title").append(kk_ru.ticket+":");jQuery("#dashboard_title").empty();jQuery("#dashboard_title").append(kk_ru+":");jQuery("#dashboard_title1").empty();jQuery("#dashboard_title1").append(kk_ru.dashboard+":");jQuery("#logosButton").empty();jQuery("#logosButton").append(kk_ru.saveChanges);jQuery("#templatesButton").empty();jQuery("#templatesButton").append(kk_ru.saveChanges);jQuery("#weekendsButton").empty();jQuery("#weekendsButton").append(kk_ru.saveChanges);jQuery("#unit_title1").empty();jQuery("#unit_title1").append(kk_ru.unit+":");jQuery("#modal_lane_title").empty();jQuery("#modal_lane_title").append(kk_ru.modal.lane.title);jQuery("#modal_lane_header").empty();jQuery("#modal_lane_header").append(kk_ru.modal.lane.header);jQuery("#modal_quesiion_header").text(kk_ru.modal.anketa.header);jQuery("#modal_question_title").text(kk_ru.modal.anketa.title);jQuery(".username").empty();jQuery(".username").append(kk_ru.username+":");jQuery(".login_help").empty();jQuery(".login_help").append(kk_ru.loginHelp);jQuery("#lane_start_range").empty();jQuery("#lane_start_range").append(kk_ru.laneStartRange+":");jQuery("#lane_end_range").empty();jQuery("#lane_end_range").append(kk_ru.laneEndRange+":");jQuery("#lane_color").empty();jQuery("#lane_color").append(kk_ru.laneColor+":");jQuery("#lane_ru").empty();jQuery("#lane_ru").append(kk_ru.laneRU+":");jQuery("#lane_kk").empty();jQuery("#lane_kk").append(kk_ru.laneKK+":");jQuery("#lane_en").empty();jQuery("#lane_en").append(kk_ru.laneEN+":");jQuery(".close").empty();jQuery(".close").append(kk_ru.close);jQuery(".save").empty();jQuery(".save").append(kk_ru.saveChanges);jQuery("#modal_unit_title").empty();jQuery("#modal_unit_title").append(kk_ru.modal.unit.title);jQuery("#modal_unit_header").empty();jQuery("#modal_unit_header").append(kk_ru.modal.unit.header);jQuery(".password").empty();jQuery(".password").append(kk_ru.password+":");jQuery("#firstname").empty();jQuery("#firstname").append(kk_ru.firstname+":");jQuery("#last_name").empty();jQuery("#last_name").append(kk_ru.lastname+":");jQuery(".second_monitor").empty();jQuery(".second_monitor").append(kk_ru.modal.secondMonitor.title);jQuery("#lanes_title").empty();jQuery("#lanes_title").append(kk_ru.lanes+":");jQuery("#modal_dashboard_title").empty();jQuery("#modal_dashboard_title").append(kk_ru.modal.dashboard.title);jQuery("#modal_dashboard_header").empty();jQuery("#modal_dashboard_header").append(kk_ru.modal.dashboard.header);jQuery("#modal_secondMonitor_header").empty();jQuery("#modal_secondMonitor_header").append(kk_ru.modal.secondMonitor.header);jQuery("#modal_kiosk_title").empty();jQuery("#modal_kiosk_title").append(kk_ru.modal.kiosk.title);jQuery("#modal_kiosk_header1").empty();jQuery("#modal_kiosk_header1").append(kk_ru.modal.kiosk.header1);jQuery("#main_lane_kk").empty();jQuery("#main_lane_kk").append(kk_ru.mainLaneKK+":");jQuery("#main_lane_ru").empty();jQuery("#main_lane_ru").append(kk_ru.mainLaneRU+":");jQuery("#createMainLaneBtn").empty();jQuery("#createMainLaneBtn").append(kk_ru.create);jQuery("#modal_kiosk_header2").empty();jQuery("#modal_kiosk_header2").append(kk_ru.modal.kiosk.header2);jQuery("#main_lanes").empty();jQuery("#main_lanes").append(kk_ru.mainLanes+":");jQuery("#kiosk_help").empty();jQuery("#kiosk_help").append(kk_ru.kioskHelp);for(var t=0;t<_count.length;t++){jQuery("#"+t).empty();if(_status[t]=="disabled")jQuery("#"+t).append(kk_ru.enable);else jQuery("#"+t).append(kk_ru.disable)}console.log("LANGUAGE IS: "+_lang);$("#message").foundation("reveal","close");XmppClient.send("queue",JSON.stringify({action:"changeLang",user:sessionStorage.jid,language:_lang}))}var _kk={lanesTab:"Қызметтер",unitsTab:"Операторлар",dashboardsTab:"Экрандар",kiosksTab:"Киосктер",logosTab:"Логотиптер",templatesTab:"Үлгілер",logosTabHeader:"Логотиптер",templatesTabHeader:"Үлгілер",weekends_title:"Демалыс күндер",enable:"Іске қосу",disable:"Өшіру",saveChanges:"Сақтау",close:"Жабу",deleteLink:"Жою",createUnit:"Операторды қосу",createLane:"Қызметті қосу",createKiosk:"Киоскты қосу",createQuestion:"Сұрақты қосу",createDashboard:"Экранды қосу",laneUsername:"Қызмет",laneStartRange:"Алғашқы нөмір",laneEndRange:"Соңғы нөмір",laneColor:"Түсі",kiosk:"Киоск",unit:"Оператор",dashboard:"Экран",ticket:"Билет",unitLanes:"Оператордың қызметтері",dashboardLanes:"Экрандағы қызметтер",lanes:"Қызметтер",username:"Логин",password:"Құпия сөз",firstname:"Аты",lastname:"Жөні",loginHelp:"Барлық бас әріптер кіші әріптерге ауыстырылады",kioskHelp:"Егер қызметтер тобын қоспасаңыз, киоскте барлық қызметтер көрсетіледі",mainLaneKK:"Топтың аты (қазақша)",mainLaneRU:"Топтың аты (орысша)",mainLanes:"Қызметтер тобы",create:"Қосу",laneRU:"Қызметтің аты (орысша)",laneKK:"Қызметтің аты (қазақша)",laneEN:"Қызметтің аты (ағылшынша)",help:"Көмек",settings:"Қондырғылар",quit:"Шығу",filials:"Бөлімшелер:",laneEN:"Название услуги (eng)",account:"Аккаунт",question:"Сұрақтар",answer1:"Первый ответ",answer2:"Второй ответ",answer3:"Третий ответ",answer4:"Четвертый ответ",answer5:"Пятый ответ",newSecondMonitor:"Мониторды қосу",choose_lang:"Тіл таңдаңыз",choose_second_monitor:"Екінші мониторды таңдаңыз",chooseFilial:"Бөлімшелерді таңдаңыз",anketa:"Анкета",modal:{unit:{title:"Оператор",header:"Жаңа мәліметтер енгізіңіз"},lane:{title:"Қызмет",header:"Жаңа мәліметтер енгізіңіз"},dashboard:{title:"Экран",header:"Жаңа мәліметтер енгізіңіз"},secondMonitor:{title:"Клиенттің мониторы",header:"Жаңа мәліметтер енгізіңіз"},kiosk:{title:"Киоск",header1:"Қызметтер тобы",header2:"Киоск мәліметтері"},anketa:{title:"Анкета",header:"Жаңа сұрақ енгізіңіз"}}};var _ru={lanesTab:"Услуги",unitsTab:"Операторы",dashboardsTab:"Экраны",kiosksTab:"Киоски",logosTab:"Логотипы",templatesTab:"Шаблоны",logosTabHeader:"Логотипы",anketaTabHeader:"Анкета",templatesTabHeader:"Шаблоны",weekends_title:"Выходные",enable:"Активировать",disable:"Отключить",saveChanges:"Сохранить",close:"Закрыть",deleteLink:"Удалить",createUnit:"Добавить оператора",createLane:"Добавить услугу",createKiosk:"Добавить киоск",createQuestion:"Добавить вопрос",createDashboard:"Добавить экран",laneUsername:"Услуга",laneStartRange:"Стартовый номер",laneEndRange:"Конечный номер",laneColor:"Цвет (hex)",kiosk:"Киоск",anketa:"Анкета",unit:"Оператор",dashboard:"Экран",ticket:"Билет",unitLanes:"Услуги оператора",dashboardLanes:"Услуги экрана",lanes:"Услуги",username:"Логин",password:"Пароль",firstname:"Имя",lastname:"Фамилия",loginHelp:"Все заглавные буквы конвертируются в маленькие",kioskHelp:"Если вы не добавите групповые услуги то на киоске будут отображаться все услуги",mainLaneKK:"Название группы на казахском",mainLaneRU:"Название группы на русском",mainLanes:"Групповые услуги",create:"Добавить",laneRU:"Название услуги (рус)",laneKK:"Название услуги (каз)",laneEN:"Название услуги (eng)",help:"Помощь",settings:"Настройки",quit:"Выход",filials:"Филиалы:",laneEN:"Название услуги (eng)",account:"Аккаунт",question:"Вопрос",answer1:"Первый ответ",answer2:"Второй ответ",answer3:"Третий ответ",answer4:"Четвертый ответ",answer5:"Пятый ответ",newSecondMonitor:"Добавить Монитор",choose_lang:"Выберите язык",choose_second_monitor:"Выберите второй монитор",chooseFilial:"Выберите филиал",modal:{unit:{title:"Оператор",header:"Введите новые данные"},lane:{title:"Услуга",header:"Введите новые данные"},dashboard:{title:"Экран",header:"Введите новые данные"},secondMonitor:{title:"Второй Монитор",header:"Введите новые данные"},kiosk:{title:"Киоск",header1:"Групповые услуги",header2:"Данные киоска"},anketa:{title:"Анкета",header:"Введите новые вопрос"}}};var _en={lanesTab:"Services",unitsTab:"Operators",dashboardsTab:"Screens",kiosksTab:"Kiosks",logosTab:"Logos",templatesTab:"Templates",logosTabHeader:"Logos",templatesTabHeader:"Templates",weekends_title:"Holidays",enable:"Activate",disable:"Deactivate",saveChanges:"Save",close:"Close",deleteLink:"Delete",createUnit:"Add operator",createLane:"Add service",createKiosk:"Add kiosk",createQuestion:"Add Question",createDashboard:"Add kiosk",laneUsername:"Service",laneStartRange:"Staring number",laneEndRange:"Ending number",laneColor:"Color (hex)",kiosk:"Kiosk",unit:"Operator",dashboard:"Screen",ticket:"Ticket",unitLanes:"Services of operator",dashboardLanes:"Services of screen",anketa:"Анкета",lanes:"Services",username:"Login",password:"Password",firstname:"First name",lastname:"Last name",loginHelp:"All capital characters are converted into lowercase characters",kioskHelp:"If You do not add group services, there will be all services showed in kiosk",mainLaneKK:"Name of group in kazakh language",mainLaneRU:"Name of group in russian language",mainLanes:"Group services",create:"Add",laneRU:"Name of service (rus)",laneKK:"Name of service (kaz)",help:"Help",settings:"Settings",quit:"Quit",filials:"Affiliates",laneEN:"Name of service (eng)",account:"Account",question:"Questions",answer1:"Первый ответ",answer2:"Второй ответ",answer3:"Третий ответ",answer4:"Четвертый ответ",answer5:"Пятый ответ",newSecondMonitor:"Add monitor",choose_lang:"Choose language",choose_second_monitor:"Choose second monitor",chooseFilial:"Choose Affiliate",modal:{unit:{title:"Operator",header:"Add new datas"},lane:{title:"Service",header:"Add new datas"},dashboard:{title:"Screen",header:"Add new datas"},secondMonitor:{title:"Second Monitor",header:"Add new datas"},kiosk:{title:"Kiosk",header1:"Group services",header2:"Datas of kiosk"},anketa:{title:"Анкета",header:"Add new question",answer1:"Answer"}}};var _obj=null;var _users=null;var _initData=null;var _lanes=null;var msg1={};var _laneTree=null;var selectedGroup=null;var _secondMonitor=[];var kk_ru=null;var _lang=null;var _count=new Array;var _status=new Array;var questionEdit=0;var answersId=new Array(0,0,0,0,0);$("#customDropdown1").change(function(){jQuery(this).removeAttr("selected");var e=$(this).find(":selected").text();selectedGroup=jQuery("#customDropdown1").val();console.log(selectedGroup);goToFilial()});jQuery("#logoutLink").click(function(){console.log("logoutLink was clicked");window.location="/";sessionStorage.clear();XmppClient.connection.disconnect()});jQuery(document).ready(function(){$(function(){window.prettyPrint&&prettyPrint();$("#dp1").fdatepicker({format:"mm-dd-yyyy"});$("#dp2").fdatepicker({closeButton:true});var e=new Date;var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0);$("#dp3").fdatepicker({onRender:function(e){return e.valueOf()<t.valueOf()?"disabled":""}});$("#dp-margin").fdatepicker();$("#dpYears").fdatepicker();$("#dpMonths").fdatepicker();var n=new Date(2012,1,20);var r=new Date(2012,1,25);$("#dp4").fdatepicker().on("changeDate",function(e){if(e.date.valueOf()>r.valueOf()){$("#alert").show().find("strong").text("The start date can not be greater then the end date")}else{$("#alert").hide();n=new Date(e.date);$("#startDate").text($("#dp4").data("date"))}$("#dp4").fdatepicker("hide")});$("#dp5").fdatepicker().on("changeDate",function(e){if(e.date.valueOf()<n.valueOf()){$("#alert").show().find("strong").text("The end date can not be less then the start date")}else{$("#alert").hide();r=new Date(e.date);$("#endDate").text($("#dp5").data("date"))}$("#dp5").fdatepicker("hide")});var e=new Date;var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0);var i=$("#dpd1").fdatepicker({onRender:function(e){return e.valueOf()<t.valueOf()?"disabled":""}}).on("changeDate",function(e){if(e.date.valueOf()>s.date.valueOf()){var t=new Date(e.date);t.setDate(t.getDate()+1);s.setValue(t)}i.hide();$("#dpd2")[0].focus()}).data("datepicker");var s=$("#dpd2").fdatepicker({onRender:function(e){return e.valueOf()<=i.date.valueOf()?"disabled":""}}).on("changeDate",function(e){s.hide()}).data("datepicker")})})