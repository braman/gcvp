/*
Demo: Despiration Tutorial Parallax Demo
Author: Elias Ghosn - Despiration.com
Author URL: http://www.despiration.com/
Tutorial URL: http://www.ianlunn.co.uk/blog/code-tutorials/recreate-nikebetterworld-parallax/

License: http://creativecommons.org/licenses/by-sa/3.0/ (Attribution Share Alike). Please attribute work to Despiration.com simply by leaving these comments in the source code or if you'd prefer, place a link on your website to http://www.despiration.com/.

Dual licensed under the MIT and GPL licenses:
http://www.opensource.org/licenses/mit-license.php
http://www.gnu.org/licenses/gpl.html
*/$(document).ready(function(){function s(){var t=e.height(),n=$("#nav").height()/2,r=t/2,i=r-n;$("#nav").css({top:i})}function o(e,t,n,r,i){return e+"% "+ -(t+n-r)*i+"px"}function u(){var n=e.scrollTop();t.hasClass("inview");$("#pixels").html(n)}var e=$(window),t=$(".main-slider"),n=$("#separator1"),r=$("#separator1 .bg2"),i=e.height();$("#main-slider, #separator1").bind("inview",function(e,t){t==1?$(this).addClass("inview"):$(this).removeClass("inview")});s();e.resize(function(){u();s()});e.bind("scroll",function(){u()})});(function(e){var t={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper"},n=e(window),r=e(document),i=[],s=n.height(),o=function(){var e=n.scrollTop(),t=r.height(),o=t-s,u=e>o?o-e:0;for(var a=0;a<i.length;a++){var f=i[a],l=f.stickyWrapper.offset().top,c=l-f.topSpacing-u;if(e<=c){if(f.currentTop!==null){f.stickyElement.css("position","").css("top","").removeClass(f.className);f.stickyElement.parent().removeClass(f.className);f.currentTop=null}}else{var h=t-f.stickyElement.outerHeight()-f.topSpacing-f.bottomSpacing-e-u;h<0?h+=f.topSpacing:h=f.topSpacing;if(f.currentTop!=h){f.stickyElement.css("position","fixed").css("top",h).addClass(f.className);f.stickyElement.parent().addClass(f.className);f.currentTop=h}}}},u=function(){s=n.height()},a={init:function(n){var r=e.extend(t,n);return this.each(function(){var t=e(this);stickyId=t.attr("id");wrapper=e("<div></div>").attr("id",stickyId+"-sticky-wrapper").addClass(r.wrapperClassName);t.wrapAll(wrapper);var n=t.parent();n.css("height",t.outerHeight());i.push({topSpacing:r.topSpacing,bottomSpacing:r.bottomSpacing,stickyElement:t,currentTop:null,stickyWrapper:n,className:r.className})})},update:o};if(window.addEventListener){window.addEventListener("scroll",o,!1);window.addEventListener("resize",u,!1)}else if(window.attachEvent){window.attachEvent("onscroll",o);window.attachEvent("onresize",u)}e.fn.sticky=function(t){if(a[t])return a[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return a.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.sticky")};e(function(){setTimeout(o,0)})})(jQuery);(function(e){function s(e){return e.replace(/(:|\.)/g,"\\$1")}var t="1.4.5",n={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:1e3,autoCoefficent:2},r=function(t){var n=[],r=!1,i=t.dir&&t.dir=="left"?"scrollLeft":"scrollTop";this.each(function(){if(this==document||this==window)return;var t=e(this);if(t[i]()>0)n.push(this);else{t[i](1);r=t[i]()>0;t[i](0);r&&n.push(this)}});t.el==="first"&&n.length&&(n=[n[0]]);return n},i="ontouchend"in document;e.fn.extend({scrollable:function(e){var t=r.call(this,{dir:e});return this.pushStack(t)},firstScrollable:function(e){var t=r.call(this,{el:"first",dir:e});return this.pushStack(t)},smoothScroll:function(t){t=t||{};var n=e.extend({},e.fn.smoothScroll.defaults,t),r=e.smoothScroll.filterPath(location.pathname);this.unbind("click.smoothscroll").bind("click.smoothscroll",function(t){var i=this,o=e(this),u=n.exclude,a=n.excludeWithin,f=0,l=0,c=!0,h={},p=location.hostname===i.hostname||!i.hostname,d=n.scrollTarget||(e.smoothScroll.filterPath(i.pathname)||r)===r,v=s(i.hash);if(!n.scrollTarget&&(!p||!d||!v))c=!1;else{while(c&&f<u.length)o.is(s(u[f++]))&&(c=!1);while(c&&l<a.length)o.closest(a[l++]).length&&(c=!1)}if(c){t.preventDefault();e.extend(h,n,{scrollTarget:n.scrollTarget||v,link:i});e.smoothScroll(h)}});return this}});e.smoothScroll=function(t,n){var r,s,o,u,a=0,f="offset",l="scrollTop",c={},h={},p=!1,d=[];if(typeof t=="number"){r=e.fn.smoothScroll.defaults;o=t}else{r=e.extend({},e.fn.smoothScroll.defaults,t||{});if(r.scrollElement){f="position";r.scrollElement.css("position")=="static"&&r.scrollElement.css("position","relative")}o=n||e(r.scrollTarget)[f]()&&e(r.scrollTarget)[f]()[r.direction]||0}r=e.extend({link:null},r);l=r.direction=="left"?"scrollLeft":l;if(r.scrollElement){s=r.scrollElement;a=s[l]()}else{s=e("html, body").firstScrollable();p=i&&"scrollTo"in window}c[l]=o+a+r.offset;r.beforeScroll.call(s,r);if(p){d=r.direction=="left"?[c[l],0]:[0,c[l]];window.scrollTo.apply(window,d);r.afterScroll.call(r.link,r)}else{u=r.speed;if(u==="auto"){u=c[l]||s.scrollTop();u/=r.autoCoefficent}h={duration:u,easing:r.easing,complete:function(){r.afterScroll.call(r.link,r)}};r.step&&(h.step=r.step);s.stop().animate(c,h)}};e.smoothScroll.version=t;e.smoothScroll.filterPath=function(e){return e.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")};e.fn.smoothScroll.defaults=n})(jQuery);(function(e,t,n,r,i,s,o,u,a,f,l,c){function h(e,t,n){var u=e[0],a=/ble/.test(n)?s:i;active="update"==n?{checked:u[i],disabled:u[s]}:u[a];if(/^ch|di/.test(n)&&!active)p(e,a);else if(/^un|en/.test(n)&&active)d(e,a);else if("update"==n)for(var a in active)active[a]?p(e,a,!0):d(e,a,!0);else if(!t||"toggle"==n)t||e.trigger("ifClicked"),active?u[o]!==r&&d(e,a):p(e,a)}function p(n,u,a){var h=n[0],p=n.parent(),v=u==s?"enabled":"un"+i,y=m(n,v+g(h[o])),b=m(n,u+g(h[o]));if(!0!==h[u]&&!a&&(h[u]=!0,n.trigger("ifChanged").trigger("if"+g(u)),u==i&&h[o]==r&&h.name)){a=n.closest("form");var w='input[name="'+h.name+'"]',w=a.length?a.find(w):e(w);w.each(function(){this!==h&&e(this).data(t)&&d(e(this),u)})}h[s]&&m(n,c,!0)&&p.find("."+t+"-helper").css(c,"default");p[f](b||m(n,u));p[l](y||m(n,v)||"")}function d(e,n,r){var u=e[0],a=e.parent(),h=n==s?"enabled":"un"+i,p=m(e,h+g(u[o])),d=m(e,n+g(u[o]));!1!==u[n]&&!r&&(u[n]=!1,e.trigger("ifChanged").trigger("if"+g(h)));!u[s]&&m(e,c,!0)&&a.find("."+t+"-helper").css(c,"pointer");a[l](d||m(e,n)||"");a[f](p||m(e,h))}function v(n,r){n.data(t)&&(n.parent().html(n.attr("style",n.data(t).s||"").trigger(r||"")),n.off(".i").unwrap(),e('label[for="'+n[0].id+'"]').add(n.closest("label")).off(".i"))}function m(e,n,r){if(e.data(t))return e.data(t).o[n+(r?"":"Class")]}function g(e){return e.charAt(0).toUpperCase()+e.slice(1)}e.fn[t]=function(c,m){var g=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini/i.test(navigator.userAgent),y=":"+n+", :"+r,b=e(),E=function(t){t.each(function(){var t=e(this);b=t.is(y)?b.add(t):b.add(t.find(y))})};if(/^(check|uncheck|toggle|disable|enable|update|destroy)$/.test(c))return E(this),b.each(function(){var t=e(this);"destroy"==c?v(t,"ifDestroyed"):h(t,!0,c);e.isFunction(m)&&m()});if("object"==typeof c||!c){var S=e.extend({checkedClass:i,disabledClass:s,labelHover:!0},c),T=S.handle,N=S.hoverClass||"hover",C=S.focusClass||"focus",L=S.activeClass||"active",O=!!S.labelHover,M=S.labelHoverClass||"hover",_=(""+S.increaseArea).replace("%","")|0;if(T==n||T==r)y=":"+T;-50>_&&(_=-50);E(this);return b.each(function(){var c=e(this);v(c);var m=this,y=m.id,b=-_+"%",E=100+2*_+"%",E={position:"absolute",top:b,left:b,display:"block",width:E,height:E,margin:0,padding:0,background:"#fff",border:0,opacity:0},b=g?{position:"absolute",visibility:"hidden"}:_?E:{position:"absolute",opacity:0},T=m[o]==n?S.checkboxClass||"i"+n:S.radioClass||"i"+r,P=e('label[for="'+y+'"]').add(c.closest("label")),B=c.wrap('<div class="'+T+'"/>').trigger("ifCreated").parent().append(S.insert),E=e('<ins class="'+t+'-helper"/>').css(E).appendTo(B);c.data(t,{o:S,s:c.attr("style")}).css(b);S.inheritClass&&B[f](m.className);S.inheritID&&y&&B.attr("id",t+"-"+y);"static"==B.css("position")&&B.css("position","relative");h(c,!0,"update");P.length&&P.on(u+".i mouseenter.i mouseleave.i "+a,function(t){var n=t[o],r=e(this);if(!m[s]){if(n==u?h(c,!1,!0):O&&(/ve|nd/.test(n)?(B[l](N),r[l](M)):(B[f](N),r[f](M))),!g)return!1;t.stopPropagation()}});c.on(u+".i focus.i blur.i keyup.i keydown.i keypress.i",function(e){var t=e[o];e=e.keyCode;if(t==u)return!1;if("keydown"==t&&32==e)return m[o]==r&&m[i]||(m[i]?d(c,i):p(c,i)),!1;"keyup"==t&&m[o]==r?!m[i]&&p(c,i):/us|ur/.test(t)&&B["blur"==t?l:f](C)});E.on(u+" mousedown mouseup mouseover mouseout "+a,function(e){var t=e[o],n=/wn|up/.test(t)?L:N;if(!m[s]){if(t==u)h(c,!1,!0);else{/wn|er|in/.test(t)?B[f](n):B[l](n+" "+L);P.length&&O&&n==N&&P[/ut|nd/.test(t)?l:f](M)}if(!g)return!1;e.stopPropagation()}})})}return this}})(jQuery,"iCheck","checkbox","radio","checked","disabled","type","click","touchbegin.i touchend.i","addClass","removeClass","cursor");!function(e){"use strict";var t=function(e){this.messages={defaultMessage:"Данные неверны.",type:{email:"Введите правильный email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"Это поле только для ввода чисел.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"Введите правильный телефонный номер."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(e)};t.prototype={constructor:t,validators:{notnull:function(e){return e.length>0},notblank:function(e){return"string"==typeof e&&""!==e.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(e){if("object"==typeof e){for(var t in e)if(this.required(e[t]))return!0;return!1}return this.notnull(e)&&this.notblank(e)},type:function(e,t){var n;switch(t){case"number":n=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":n=/^\d+$/;break;case"alphanum":n=/^\w+$/;break;case"email":n=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":e=(new RegExp("(https?|s?ftp|git)","i")).test(e)?e:"http://"+e;case"urlstrict":n=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":n=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":n=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return!1}return""!==e?n.test(e):!1},regexp:function(e,t,n){return(new RegExp(t,n.options.regexpFlag||"")).test(e)},minlength:function(e,t){return e.length>=t},maxlength:function(e,t){return e.length<=t},rangelength:function(e,t){return this.minlength(e,t[0])&&this.maxlength(e,t[1])},min:function(e,t){return Number(e)>=t},max:function(e,t){return Number(e)<=t},range:function(e,t){return e>=t[0]&&e<=t[1]},equalto:function(t,n,r){r.options.validateIfUnchanged=!0;return t===e(n).val()},remote:function(t,n,r){var i=null,s={},o={};s[r.$element.attr("name")]=t;"undefined"!=typeof r.options.remoteDatatype&&(o={dataType:r.options.remoteDatatype});var u=function(t,n){"undefined"!=typeof n&&"undefined"!=typeof r.Validator.messages.remote&&n!==r.Validator.messages.remote&&e(r.ulError+" .remote").remove();r.updtConstraint({name:"remote",valid:t},n);r.manageValidationResult()},a=function(t){if("object"==typeof t)return t;try{t=e.parseJSON(t)}catch(n){}return t},f=function(e){return"object"==typeof e&&null!==e?"undefined"!=typeof e.error?e.error:"undefined"!=typeof e.message?e.message:null:null};e.ajax(e.extend({},{url:n,data:s,type:r.options.remoteMethod||"GET",success:function(e){e=a(e);u(1===e||!0===e||"object"==typeof e&&null!==e&&"undefined"!=typeof e.success,f(e))},error:function(e){e=a(e);u(!1,f(e))}},o));return i},mincheck:function(e,t){return this.minlength(e,t)},maxcheck:function(e,t){return this.maxlength(e,t)},rangecheck:function(e,t){return this.rangelength(e,t)}},init:function(e){var t=e.validators,n=e.messages,r;for(r in t)this.addValidator(r,t[r]);for(r in n)this.addMessage(r,n[r])},formatMesssage:function(e,t){if("object"==typeof t){for(var n in t)e=this.formatMesssage(e,t[n]);return e}return"string"==typeof e?e.replace(new RegExp("%s","i"),t):""},addValidator:function(e,t){this.validators[e]=t},addMessage:function(e,t,n){if("undefined"!=typeof n&&!0===n){this.messages.type[e]=t;return}if("type"===e){for(var r in t)this.messages.type[r]=t[r];return}this.messages[e]=t}};var n=function(e,n,r){this.options=n;this.Validator=new t(n);if(r==="ParsleyFieldMultiple")return this;this.init(e,r||"ParsleyField")};n.prototype={constructor:n,init:function(t,n){this.type=n;this.valid=!0;this.element=t;this.validatedOnce=!1;this.$element=e(t);this.val=this.$element.val();this.isRequired=!1;this.constraints={};if("undefined"==typeof this.isRadioOrCheckbox){this.isRadioOrCheckbox=!1;this.hash=this.generateHash();this.errorClassHandler=this.options.errors.classHandler(t,this.isRadioOrCheckbox)||this.$element}this.ulErrorManagement();this.bindHtml5Constraints();this.addConstraints();this.hasConstraints()&&this.bindValidationEvents()},setParent:function(t){this.$parent=e(t)},getParent:function(){return this.$parent},bindHtml5Constraints:function(){if(this.$element.hasClass("required")||this.$element.prop("required"))this.options.required=!0;if("undefined"!=typeof this.$element.attr("type")&&(new RegExp(this.$element.attr("type"),"i")).test("email url number range")){this.options.type=this.$element.attr("type");if((new RegExp(this.options.type,"i")).test("number range")){this.options.type="number";"undefined"!=typeof this.$element.attr("min")&&this.$element.attr("min").length&&(this.options.min=this.$element.attr("min"));"undefined"!=typeof this.$element.attr("max")&&this.$element.attr("max").length&&(this.options.max=this.$element.attr("max"))}}"string"==typeof this.$element.attr("pattern")&&this.$element.attr("pattern").length&&(this.options.regexp=this.$element.attr("pattern"))},addConstraints:function(){for(var e in this.options){var t={};t[e]=this.options[e];this.addConstraint(t,!0)}},addConstraint:function(e,t){for(var n in e){n=n.toLowerCase();if("function"==typeof this.Validator.validators[n]){this.constraints[n]={name:n,requirements:e[n],valid:null};n==="required"&&(this.isRequired=!0);this.addCustomConstraintMessage(n)}}"undefined"==typeof t&&this.bindValidationEvents()},updateConstraint:function(e,t){for(var n in e)this.updtConstraint({name:n,requirements:e[n],valid:null},t)},updtConstraint:function(t,n){this.constraints[t.name]=e.extend(!0,this.constraints[t.name],t);"string"==typeof n&&(this.Validator.messages[t.name]=n);this.bindValidationEvents()},removeConstraint:function(e){var e=e.toLowerCase();delete this.constraints[e];e==="required"&&(this.isRequired=!1);if(!this.hasConstraints()){if("ParsleyForm"==typeof this.getParent()){this.getParent().removeItem(this.$element);return}this.destroy();return}this.bindValidationEvents()},addCustomConstraintMessage:function(e){var t=e+("type"===e&&"undefined"!=typeof this.options[e]?this.options[e].charAt(0).toUpperCase()+this.options[e].substr(1):"")+"Message";"undefined"!=typeof this.options[t]&&this.Validator.addMessage("type"===e?this.options[e]:e,this.options[t],"type"===e)},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);this.options.remote&&!(new RegExp("change","i")).test(this.options.trigger)&&(this.options.trigger=this.options.trigger?" change":"change");var t=(this.options.trigger?this.options.trigger:"")+((new RegExp("key","i")).test(this.options.trigger)?"":" keyup");this.$element.is("select")&&(t+=(new RegExp("change","i")).test(t)?"":" change");t=t.replace(/^\s+/g,"").replace(/\s+$/g,"");this.$element.on((t+" ").split(" ").join("."+this.type+" "),!1,e.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.data("value")||this.$element.val()},eventValidation:function(e){var t=this.getVal();if(e.type==="keyup"&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce)return!0;if(e.type==="change"&&!/change/i.test(this.options.trigger)&&!this.validatedOnce)return!0;if(!this.isRadioOrCheckbox&&t.length<this.options.validationMinlength&&!this.validatedOnce)return!0;this.validate()},isValid:function(){return this.validate(!1)},hasConstraints:function(){for(var e in this.constraints)return!0;return!1},validate:function(e){var t=this.getVal(),n=null;if(!this.hasConstraints())return null;if(this.options.listeners.onFieldValidate(this.element,this)||""===t&&!this.isRequired){this.reset();return null}if(!this.needsValidation(t))return this.valid;n=this.applyValidators();("undefined"!=typeof e?e:this.options.showErrors)&&this.manageValidationResult();return n},needsValidation:function(e){if(!this.options.validateIfUnchanged&&this.valid!==null&&this.val===e&&this.validatedOnce)return!1;this.val=e;return this.validatedOnce=!0},applyValidators:function(){var e=null;for(var t in this.constraints){var n=this.Validator.validators[this.constraints[t].name](this.val,this.constraints[t].requirements,this);if(!1===n){e=!1;this.constraints[t].valid=e;this.options.listeners.onFieldError(this.element,this.constraints,this)}else if(!0===n){this.constraints[t].valid=!0;e=!1!==e;this.options.listeners.onFieldSuccess(this.element,this.constraints,this)}}return e},manageValidationResult:function(){var e=null;for(var t in this.constraints)if(!1===this.constraints[t].valid){this.manageError(this.constraints[t]);e=!1}else if(!0===this.constraints[t].valid){this.removeError(this.constraints[t].name);e=!1!==e}this.valid=e;if(!0===this.valid){this.removeErrors();this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);return!0}if(!1===this.valid){this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);return!1}return e},ulErrorManagement:function(){this.ulError="#"+this.hash;this.ulTemplate=e(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(t){var n=this.ulError+" ."+t,r=this;this.options.animate?e(n).fadeOut(this.options.animateDuration,function(){e(this).remove();r.ulError&&e(r.ulError).children().length===0&&r.removeErrors()}):e(n).remove();this.ulError&&e(this.ulError).children().length===0&&this.removeErrors()},addError:function(t){for(var n in t){var r=e(this.options.errors.errorElem).addClass(n);e(this.ulError).append(this.options.animate?e(r).html(t[n]).hide().fadeIn(this.options.animateDuration):e(r).html(t[n]))}},removeErrors:function(){this.options.animate?e(this.ulError).fadeOut(this.options.animateDuration,function(){e(this).remove()}):e(this.ulError).remove()},reset:function(){this.valid=null;this.removeErrors();this.validatedOnce=!1;this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);for(var e in this.constraints)this.constraints[e].valid=null;return this},manageError:function(t){e(this.ulError).length||this.manageErrorContainer();if("required"===t.name&&null!==this.getVal()&&this.getVal().length>0)return;if(!(!this.isRequired||"required"===t.name||null!==this.getVal()&&0!==this.getVal().length))return;var n=t.name,r=!1!==this.options.errorMessage?"custom-error-message":n,i={},s=!1!==this.options.errorMessage?this.options.errorMessage:t.name==="type"?this.Validator.messages[n][t.requirements]:"undefined"==typeof this.Validator.messages[n]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[n],t.requirements);if(!e(this.ulError+" ."+r).length){i[r]=s;this.addError(i)}},manageErrorContainer:function(){var t=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),n=this.options.animate?this.ulTemplate.show():this.ulTemplate;if("undefined"!=typeof t){e(t).append(n);return}this.isRadioOrCheckbox?this.$element.parent().after(n):this.$element.after(n)},addListener:function(e){for(var t in e)this.options.listeners[t]=e[t]},destroy:function(){this.$element.removeClass("parsley-validated");this.reset().$element.off("."+this.type).removeData(this.type)}};var r=function(e,n,r){this.initMultiple(e,n);this.inherit(e,n);this.Validator=new t(n);this.init(e,r||"ParsleyFieldMultiple")};r.prototype={constructor:r,initMultiple:function(t,n){this.element=t;this.$element=e(t);this.group=n.group||!1;this.hash=this.getName();this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]';this.isRadioOrCheckbox=!0;this.isRadio=this.$element.is("input[type=radio]");this.isCheckbox=this.$element.is("input[type=checkbox]");this.errorClassHandler=n.errors.classHandler(t,this.isRadioOrCheckbox)||this.$element.parent()},inherit:function(e,t){var r=new n(e,t,"ParsleyFieldMultiple");for(var i in r)"undefined"==typeof this[i]&&(this[i]=r[i])},getName:function(){if(this.group)return"parsley-"+this.group;if("undefined"==typeof this.$element.attr("name"))throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !";return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio)return e(this.siblings+":checked").val()||"";if(this.isCheckbox){var t=[];e(this.siblings+":checked").each(function(){t.push(e(this).val())});return t}},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);var t=this,n=(this.options.trigger?this.options.trigger:"")+((new RegExp("change","i")).test(this.options.trigger)?"":" change");n=n.replace(/^\s+/g,"").replace(/\s+$/g,"");e(this.siblings).each(function(){e(this).on(n.split(" ").join("."+t.type+" "),!1,e.proxy(t.eventValidation,t))})}};var i=function(e,t,n){this.init(e,t,n||"parsleyForm")};i.prototype={constructor:i,init:function(t,n,r){this.type=r;this.items=[];this.$element=e(t);this.options=n;var i=this;this.$element.find(n.inputs).each(function(){i.addItem(this)});this.$element.on("submit."+this.type,!1,e.proxy(this.validate,this))},addListener:function(e){for(var t in e)if((new RegExp("Field")).test(t))for(var n=0;n<this.items.length;n++)this.items[n].addListener(e);else this.options.listeners[t]=e[t]},addItem:function(t){if(e(t).is(this.options.excluded))return!1;var n=e(t).parsley(this.options);n.setParent(this);this.items.push(n)},removeItem:function(t){var n=e(t).parsley();for(var r=0;r<this.items.length;r++)if(this.items[r].hash===n.hash){this.items[r].destroy();this.items.splice(r,1);return!0}return!1},validate:function(e){var t=!0;this.focusedField=!1;for(var n=0;n<this.items.length;n++)if("undefined"!=typeof this.items[n]&&!1===this.items[n].validate()){t=!1;if(!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus)this.focusedField=this.items[n].$element}this.focusedField&&!t&&this.focusedField.focus();this.options.listeners.onFormSubmit(t,e,this);return t},isValid:function(){for(var e=0;e<this.items.length;e++)if(!1===this.items[e].isValid())return!1;return!0},removeErrors:function(){for(var e=0;e<this.items.length;e++)this.items[e].parsley("reset")},destroy:function(){for(var e=0;e<this.items.length;e++)this.items[e].destroy();this.$element.off("."+this.type).removeData(this.type)},reset:function(){for(var e=0;e<this.items.length;e++)this.items[e].reset()}};e.fn.parsley=function(t,s){function a(u,a){var f=e(u).data(a);if(!f){switch(a){case"parsleyForm":f=new i(u,o,"parsleyForm");break;case"parsleyField":f=new n(u,o,"parsleyField");break;case"parsleyFieldMultiple":f=new r(u,o,"parsleyFieldMultiple");break;default:return}e(u).data(a,f)}if("string"==typeof t&&"function"==typeof f[t]){var l=f[t](s);return"undefined"!=typeof l?l:e(u)}return f}var o=e.extend(!0,{},e.fn.parsley.defaults,"undefined"!=typeof window.ParsleyConfig?window.ParsleyConfig:{},t,this.data()),u=null;e(this).is("form")?u=a(e(this),"parsleyForm"):e(this).is(o.inputs)&&!e(this).is(o.excluded)&&(u=a(e(this),e(this).is("input[type=radio], input[type=checkbox]")?"parsleyFieldMultiple":"parsleyField"));return"function"==typeof s?s():u};e.fn.parsley.Constructor=i;e.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], :disabled",trigger:!1,animate:!0,animateDuration:300,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:!1,validators:{},showErrors:!0,messages:{},validateIfUnchanged:!1,errors:{classHandler:function(e,t){},container:function(e,t){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(e,t){return!1},onFormSubmit:function(e,t,n){},onFieldError:function(e,t,n){},onFieldSuccess:function(e,t,n){}}};e(window).on("load",function(){e('[data-validate="parsley"]').each(function(){e(this).parsley()})})}(window.jQuery||window.Zepto);window.Picker=function(e,t){function n(r,i,s,o){function p(){return n._.node("div",n._.node("div",n._.node("div",n._.node("div",h.component.nodes(u.open),f.box),f.wrap),f.frame),f.holder)}function d(e){e.stopPropagation();e.type=="focus"&&h.$root.addClass(f.focused);h.open()}if(!r)return n;var u={id:Math.abs(~~(Math.random()*1e9))},a=s?$.extend(!0,{},s.defaults,o):o||{},f=$.extend({},n.klasses(),a.klass),l=$(r),c=function(){return this.start()},h=c.prototype={constructor:c,$node:l,start:function(){if(u&&u.start)return h;u.methods={};u.start=!0;u.open=!1;u.type=r.type;r.autofocus=r==document.activeElement;r.type="text";r.readOnly=!0;h.component=new s(h,a);h.$root=$(n._.node("div",p(),f.picker)).on({focusin:function(e){h.$root.removeClass(f.focused);e.stopPropagation()},mousedown:function(e){e.target!=h.$root.children()[0]&&e.stopPropagation()},click:function(e){var t=e.target,i=t.attributes.length?$(t):$(t).closest("[data-pick]"),s=i.data();if(t!=h.$root.children()[0]){e.stopPropagation();h.$root.find(document.activeElement).length||r.focus();s.nav&&!i.hasClass(f.navDisabled)?h.set("highlight",h.component.item.highlight,{nav:s.nav}):n._.isInteger(s.pick)&&!i.hasClass(f.disabled)?h.set("select",s.pick).close(!0):s.clear&&h.clear().close(!0)}}});h._hidden=a.formatSubmit?$("<input type=hidden name="+r.name+(a.hiddenSuffix||"_submit")+(l.data("value")?' value="'+n._.trigger(h.component.formats.toString,h.component,[a.formatSubmit,h.component.item.select]):"")+'">')[0]:t;l.addClass(f.input).on("focus.P"+u.id+" click.P"+u.id,d).on("change.P"+u.id,function(){h._hidden&&(h._hidden.value=r.value?n._.trigger(h.component.formats.toString,h.component,[a.formatSubmit,h.component.item.select]):"")}).on("keydown.P"+u.id,function(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(t==27){h.close();return!1}if(t==32||n||!u.open&&h.component.key[t]){e.preventDefault();e.stopPropagation();n?h.clear().close():h.open()}}).val(l.data("value")?n._.trigger(h.component.formats.toString,h.component,[a.format,h.component.item.select]):r.value).after(h.$root,h._hidden).data(i,h);h.on({start:h.component.onStart,render:h.component.onRender,stop:h.component.onStop,open:h.component.onOpen,close:h.component.onClose,set:h.component.onSet}).on({start:a.onStart,render:a.onRender,stop:a.onStop,open:a.onOpen,close:a.onClose,set:a.onSet});r.autofocus&&h.open();return h.trigger("start").trigger("render")},render:function(){h.$root.html(p());return h.trigger("render")},stop:function(){if(!u.start)return h;h.close();h._hidden&&h._hidden.parentNode.removeChild(h._hidden);h.$root.remove();l.removeClass(f.input).off(".P"+u.id).removeData(i);r.type=u.type;r.readOnly=!1;h.trigger("stop");u.methods={};u.start=!1;return h},open:function(t){if(u.open)return h;l.addClass(f.active);h.$root.addClass(f.opened);if(t!==!1){u.open=!0;l.focus();e.on("click.P"+u.id+" focusin.P"+u.id,function(e){e.target!=r&&e.target!=document&&h.close()}).on("keydown.P"+u.id,function(e){var t=e.keyCode,i=h.component.key[t],s=e.target;if(t==27)h.close(!0);else if(s!=r||!i&&t!=13){if(h.$root.find(s).length&&t==13){e.preventDefault();s.click()}}else{e.preventDefault();i?n._.trigger(h.component.key.go,h,[i]):h.set("select",h.component.item.highlight).close()}})}return h.trigger("open")},close:function(t){if(t){l.off("focus.P"+u.id).focus();setTimeout(function(){l.on("focus.P"+u.id,d)},0)}l.removeClass(f.active);h.$root.removeClass(f.opened+" "+f.focused);if(u.open){u.open=!1;e.off(".P"+u.id)}return h.trigger("close")},clear:function(){return h.set("clear")},set:function(e,t,r){var i,s,o=n._.isObject(e),u=o?e:{};if(e){o||(u[e]=t);for(i in u){s=u[i];h.component.item[i]&&h.component.set(i,s,r||{});(i=="select"||i=="clear")&&l.val(i=="clear"?"":n._.trigger(h.component.formats.toString,h.component,[a.format,h.component.get(i)])).trigger("change")}h.render()}return h.trigger("set",u)},get:function(e,t){e=e||"value";if(u[e]!=null)return u[e];if(e=="value")return r.value;if(h.component.item[e])return typeof t=="string"?n._.trigger(h.component.formats.toString,h.component,[t,h.component.get(e)]):h.component.get(e)},on:function(e,t){var r,i,s=n._.isObject(e),o=s?e:{};if(e){s||(o[e]=t);for(r in o){i=o[r];u.methods[r]=u.methods[r]||[];u.methods[r].push(i)}}return h},trigger:function(e,t){var r=u.methods[e];r&&r.map(function(e){n._.trigger(e,h,[t])});return h}};return new c}n.klasses=function(e){e=e||"picker";return{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}};n._={group:function(e){var t,r="",i=n._.trigger(e.min,e);for(;i<=n._.trigger(e.max,e,[i]);i+=e.i){t=n._.trigger(e.item,e,[i]);r+=n._.node(e.node,t[0],t[1],t[2])}return r},node:function(e,t,n,r){if(!t)return"";t=Array.isArray(t)?t.join(""):t;n=n?' class="'+n+'"':"";r=r?" "+r:"";return"<"+e+n+r+">"+t+"</"+e+">"},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return typeof e=="function"?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isObject:function(e){return{}.toString.call(e).indexOf("Object")>-1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1},isInteger:function(e){return{}.toString.call(e).indexOf
("Number")>-1&&e%1===0}};n.extend=function(e,t){$.fn[e]=function(r,i){var s=this.data(e);if(r=="picker")return s;if(s&&typeof r=="string"){n._.trigger(s[r],s,[i]);return this}return this.each(function(){var i=$(this);i.data(e)||new n(this,e,t,r)})};$.fn[e].defaults=t.defaults};return n}($(document));(function(){function n(e,t){var n=this,r=e.$node.data("value");n.settings=t;n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"navigate create validate",view:"create validate viewset",disable:"flipItem",enable:"flipItem"};n.item={};n.item.disable=(t.disable||[]).slice(0);n.item.enable=-function(e){return e[0]===!0?e.shift():-1}(n.item.disable);n.set("min",t.min).set("max",t.max).set("now").set("select",r||e.$node[0].value||n.item.now,{format:r?t.formatSubmit:t.format,data:!!r});n.key={40:7,38:-7,39:1,37:-1,go:function(e){n.set("highlight",[n.item.highlight.year,n.item.highlight.month,n.item.highlight.date+e],{interval:e});this.render()}};e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){e.set("highlight",[e.get("view").year,this.value,e.get("highlight").date]);e.$root.find("."+t.klass.selectMonth).focus()});e.$root.find("."+t.klass.selectYear).on("change",function(){e.set("highlight",[this.value,e.get("view").month,e.get("highlight").date]);e.$root.find("."+t.klass.selectYear).focus()})}).on("open",function(){e.$root.find("button, select").attr("disabled",!1)}).on("close",function(){e.$root.find("button, select").attr("disabled",!0)})}var e=7,t=6;n.prototype.set=function(e,t,n){var r=this;r.item[e=="enable"?"disable":e=="flip"?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n)}).pop();e=="select"?r.set("highlight",r.item.select,n):e=="highlight"?r.set("view",r.item.highlight,n):(e=="flip"||e=="min"||e=="max"||e=="disable"||e=="enable")&&r.item.select&&r.item.highlight&&r.set("select",r.item.select,n).set("highlight",r.item.highlight,n);return r};n.prototype.get=function(e){return this.item[e]};n.prototype.create=function(e,t,n){var r,i=this;t=t===undefined?e:t;t==-Infinity||t==Infinity?r=t:Picker._.isObject(t)&&Picker._.isInteger(t.pick)?t=t.obj:Array.isArray(t)?t=new Date(t[0],t[1],t[2]):Picker._.isInteger(t)||Picker._.isDate(t)?t=i.normalize(new Date(t),n):t=i.now(e,t,n);return{year:r||t.getFullYear(),month:r||t.getMonth(),date:r||t.getDate(),day:r||t.getDay(),obj:r||t,pick:r||t.getTime()}};n.prototype.now=function(e,t,n){t=new Date;n&&n.rel&&t.setDate(t.getDate()+n.rel);return this.normalize(t,n)};n.prototype.navigate=function(e,t,n){Picker._.isObject(t)&&(t=[t.year,t.month+(n&&n.nav?n.nav:0),t.date]);return t};n.prototype.normalize=function(e){e.setHours(0,0,0,0);return e};n.prototype.measure=function(e,t){var n=this;t?Picker._.isInteger(t)&&(t=n.now(e,t,{rel:t})):t=e=="min"?-Infinity:Infinity;return t};n.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])};n.prototype.validate=function(e,t,n){var r=this,i=n&&n.interval?n.interval:1;r.disabled(t)&&(t=r.shift(t,i));t=r.scope(t);r.disabled(t)&&(t=r.shift(t,t.pick<=r.item.min.pick?1:t.pick>=r.item.max.pick?-1:i));return t};n.prototype.disabled=function(e){var t=this,n=t.item.disable.filter(function(n){if(Picker._.isInteger(n))return e.day===(t.settings.firstDay?n:n-1)%7;if(Array.isArray(n))return e.pick===t.create(n).pick}).length;return t.item.enable===-1?!n:n};n.prototype.shift=function(e,t){var n=this,r=e;t=t||1;while(n.disabled(e)){e=n.create([e.year,e.month,e.date+t]);if(Math.abs(e.month-r.month)>2){e=r;n.item.enable===-1?t=t<0?1:-1:t=t<0?-1:1}if(e.pick<=n.item.min.pick||e.pick>=n.item.max.pick)break}return e};n.prototype.scope=function(e){var t=this.item.min.pick,n=this.item.max.pick;return this.create(e.pick>n?n:e.pick<t?t:e)};n.prototype.parse=function(e,t,n){var r=this,i={};if(!t||Picker._.isInteger(t)||Array.isArray(t)||Picker._.isDate(t)||Picker._.isObject(t)&&Picker._.isInteger(t.pick))return t;if(!n||!n.format)throw"Need a formatting option to parse this..";r.formats.toArray(n.format).map(function(e){var n=r.formats[e],s=n?Picker._.trigger(n,r,[t,i]):e.replace(/^!/,"").length;n&&(i[e]=t.substr(0,s));t=t.substr(s)});return[i.yyyy||i.yy,+(i.mm||i.m)-(n.data?1:0),i.dd||i.d]};n.prototype.formats=function(){var e=function(e,t,n){var r=e.match(/\w+/)[0];!n.mm&&!n.m&&(n.m=t.indexOf(r));return r.length};return{d:function(e,t){return e?Picker._.digits(e):t.date},dd:function(e,t){return e?2:Picker._.lead(t.date)},ddd:function(e,t){return e?getFirstWordLength(e):this.settings.weekdaysShort[t.day]},dddd:function(e,t){return e?getFirstWordLength(e):this.settings.weekdaysFull[t.day]},m:function(e,t){return e?Picker._.digits(e):t.month+1},mm:function(e,t){return e?2:Picker._.lead(t.month+1)},mmm:function(t,n){var r=this.settings.monthsShort;return t?e(t,r,n):r[n.month]},mmmm:function(t,n){var r=this.settings.monthsFull;return t?e(t,r,n):r[n.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return Picker._.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}();n.prototype.flipItem=function(e,t){var n=this,r=n.item.disable,i=n.item.enable===-1;if(t=="flip")n.item.enable=i?1:-1;else if(!i&&e=="enable"||i&&e=="disable")r=n.removeDisabled(r,t);else if(!i&&e=="disable"||i&&e=="enable")r=n.addDisabled(r,t);return r};n.prototype.addDisabled=function(e,t){var n=this;t.map(function(t){n.filterDisabled(e,t).length||e.push(t)});return e};n.prototype.removeDisabled=function(e,t){var n=this;t.map(function(t){e=n.filterDisabled(e,t,1)});return e};n.prototype.filterDisabled=function(e,t,n){var r=Array.isArray(t);return e.filter(function(e){var i=!r&&t===e||r&&Array.isArray(e)&&t.toString()===e.toString();return n?!i:i})};n.prototype.nodes=function(n){var r=this,i=r.settings,s=r.item.now,o=r.item.select,u=r.item.highlight,a=r.item.view,f=r.item.disable,l=r.item.min,c=r.item.max,h=function(t){i.firstDay&&t.push(t.shift());return Picker._.node("thead",Picker._.group({min:0,max:e-1,i:1,node:"th",item:function(e){return[t[e],i.klass.weekdays]}}))}((i.showWeekdaysFull?i.weekdaysFull:i.weekdaysShort).slice(0)),p=function(e){return Picker._.node("div"," ",i.klass["nav"+(e?"Next":"Prev")]+(e&&a.year>=c.year&&a.month>=c.month||!e&&a.year<=l.year&&a.month<=l.month?" "+i.klass.navDisabled:""),"data-nav="+(e||-1))},d=function(e){return i.selectMonths?Picker._.node("select",Picker._.group({min:0,max:11,i:1,node:"option",item:function(t){return[e[t],0,"value="+t+(a.month==t?" selected":"")+(a.year==l.year&&t<l.month||a.year==c.year&&t>c.month?" disabled":"")]}}),i.klass.selectMonth,n?"":"disabled"):Picker._.node("div",e[a.month],i.klass.month)},v=function(){var e=a.year,t=i.selectYears===!0?5:~~(i.selectYears/2);if(t){var r=l.year,s=c.year,o=e-t,u=e+t;if(r>o){u+=r-o;o=r}if(s<u){var f=o-r,h=u-s;o-=f>h?h:f;u=s}return Picker._.node("select",Picker._.group({min:o,max:u,i:1,node:"option",item:function(t){return[t,0,"value="+t+(e==t?" selected":"")]}}),i.klass.selectYear,n?"":"disabled")}return Picker._.node("div",e,i.klass.year)};return Picker._.node("div",p()+p(1)+d(i.showMonthsShort?i.monthsShort:i.monthsFull)+v(),i.klass.header)+Picker._.node("table",h+Picker._.node("tbody",Picker._.group({min:0,max:t-1,i:1,node:"tr",item:function(t){return[Picker._.group({min:e*t-a.day+1,max:function(){return this.min+e-1},i:1,node:"td",item:function(e){e=r.create([a.year,a.month,e+(i.firstDay?1:0)]);return[Picker._.node("div",e.date,function(t){t.push(a.month==e.month?i.klass.infocus:i.klass.outfocus);s.pick==e.pick&&t.push(i.klass.now);o&&o.pick==e.pick&&t.push(i.klass.selected);u&&u.pick==e.pick&&t.push(i.klass.highlighted);(f&&r.disabled(e)||e.pick<l.pick||e.pick>c.pick)&&t.push(i.klass.disabled);return t.join(" ")}([i.klass.day]),"data-pick="+e.pick)]}})]}})),i.klass.table)+Picker._.node("div",Picker._.node("button",i.today,i.klass.buttonToday,"data-pick="+s.pick+(n?"":" disabled"))+Picker._.node("button",i.clear,i.klass.buttonClear,"data-clear=1"+(n?"":" disabled")),i.klass.footer)};n.defaults=function(e){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today"}}}(Picker.klasses().picker+"__");Picker.extend("pickadate",n)})();(function(){function i(e,t){var n=this,r=e.$node.data("value");n.settings=t;n.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"create validate",view:"create validate",disable:"flipItem",enable:"flipItem"};n.item={};n.item.interval=t.interval||30;n.item.disable=(t.disable||[]).slice(0);n.item.enable=-function(e){return e[0]===!0?e.shift():-1}(n.item.disable);n.set("min",t.min).set("max",t.max).set("now").set("select",r||e.$node[0].value||n.item.min,{format:r?t.formatSubmit:t.format});n.key={40:1,38:-1,39:1,37:-1,go:function(e){n.set("highlight",n.item.highlight.pick+e*n.item.interval,{interval:e*n.item.interval});this.render()}};e.on("render",function(){var r=e.$root.children(),i=r.find("."+t.klass.viewset);i.length?r[0].scrollTop=~~(i.position().top-i[0].clientHeight*2):console.warn("Nothing to viewset with",n.item.view)}).on("open",function(){e.$root.find("button").attr("disable",!1)}).on("close",function(){e.$root.find("button").attr("disable",!0)})}var e=24,t=60,n=12,r=e*t;i.prototype.set=function(e,t,n){var r=this;r.item[e=="enable"?"disable":e=="flip"?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n)}).pop();if(e=="select")r.set("highlight",r.item.select,n);else if(e=="highlight")r.set("view",r.item.highlight,n);else if(e=="interval")r.set("min",r.item.min,n).set("max",r.item.max,n);else if((e=="flip"||e=="min"||e=="max"||e=="disable"||e=="enable")&&r.item.select&&r.item.highlight){e=="min"&&r.set("max",r.item.max,n);r.set("select",r.item.select,n).set("highlight",r.item.highlight,n)}return r};i.prototype.get=function(e){return this.item[e]};i.prototype.create=function(n,i,s){var o=this;i=i===undefined?n:i;Picker._.isObject(i)&&Picker._.isInteger(i.pick)?i=i.pick:Array.isArray(i)?i=+i[0]*t+ +i[1]:Picker._.isInteger(i)||(i=o.now(n,i,s));n=="max"&&i<o.item.min.pick&&(i+=r);i=o.normalize(i,s);return{hour:~~(e+i/t)%e,mins:(t+i%t)%t,time:(r+i)%r,pick:i}};i.prototype.now=function(e,n){var r=new Date,i=r.getHours()*t+r.getMinutes();Picker._.isInteger(n)?n+=e=="min"&&n<0&&i===0?2:1:n=1;return n*this.item.interval+i};i.prototype.normalize=function(e){return e-((e<0?this.item.interval:0)+e%this.item.interval)};i.prototype.measure=function(n,r,i){var s=this;r?r===!0||Picker._.isInteger(r)?r=s.now(n,r,i):Picker._.isObject(r)&&Picker._.isInteger(r.pick)&&(r=s.normalize(r.pick,i)):r=n=="min"?[0,0]:[e-1,t-1];return r};i.prototype.validate=function(e,t,n){var r=this,i=n&&n.interval?n.interval:r.item.interval;r.disabled(t)&&(t=r.shift(t,i));t=r.scope(t);r.disabled(t)&&(t=r.shift(t,i*-1));return t};i.prototype.disabled=function(e){var t=this,n=t.item.disable.filter(function(n){if(Picker._.isInteger(n))return e.hour==n;if(Array.isArray(n))return e.pick==t.create(n).pick}).length;return t.item.enable===-1?!n:n};i.prototype.shift=function(e,t){var n=this;while(n.disabled(e)){e=n.create(e.pick+=t||n.item.interval);if(e.pick<=n.item.min.pick||e.pick>=n.item.max.pick)break}return e};i.prototype.scope=function(e){var t=this.item.min.pick,n=this.item.max.pick;return this.create(e.pick>n?n:e.pick<t?t:e)};i.prototype.parse=function(e,n,r){var i=this,s={};if(!n||Picker._.isInteger(n)||Array.isArray(n)||Picker._.isDate(n)||Picker._.isObject(n)&&Picker._.isInteger(n.pick))return n;if(!r||!r.format)throw"Need a formatting option to parse this..";i.formats.toArray(r.format).map(function(e){var t=i.formats[e],r=t?Picker._.trigger(t,i,[n,s]):e.replace(/^!/,"").length;t&&(s[e]=n.substr(0,r));n=n.substr(r)});return+s.i+t*(+(s.H||s.HH)||+(s.h||s.hh)%12+(/^p/i.test(s.A||s.a)?12:0))};i.prototype.formats={h:function(e,t){return e?Picker._.digits(e):t.hour%n||n},hh:function(e,t){return e?2:Picker._.lead(t.hour%n||n)},H:function(e,t){return e?Picker._.digits(e):""+t.hour},HH:function(e,t){return e?Picker._.digits(e):Picker._.lead(t.hour)},i:function(e,t){return e?2:Picker._.lead(t.mins)},a:function(e,t){return e?4:r/2>t.time%r?"a.m.":"p.m."},A:function(e,t){return e?2:r/2>t.time%r?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return Picker._.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}};i.prototype.flipItem=function(e,t){var n=this,r=n.item.disable,i=n.item.enable===-1;if(t=="flip")n.item.enable=i?1:-1;else if(!i&&e=="enable"||i&&e=="disable")r=n.removeDisabled(r,t);else if(!i&&e=="disable"||i&&e=="enable")r=n.addDisabled(r,t);return r};i.prototype.addDisabled=function(e,t){var n=this;t.map(function(t){n.filterDisabled(e,t).length||e.push(t)});return e};i.prototype.removeDisabled=function(e,t){var n=this;t.map(function(t){e=n.filterDisabled(e,t,1)});return e};i.prototype.filterDisabled=function(e,t,n){var r=Array.isArray(t);return e.filter(function(e){var i=!r&&t===e||r&&Array.isArray(e)&&t.toString()===e.toString();return n?!i:i})};i.prototype.i=function(e,t){return Picker._.isInteger(t)&&t>0?t:this.item.interval};i.prototype.nodes=function(e){var t=this,n=t.settings,r=t.item.select,i=t.item.highlight,s=t.item.view,o=t.item.disable;return Picker._.node("ul",Picker._.group({min:t.item.min.pick,max:t.item.max.pick,i:t.item.interval,node:"li",item:function(e){e=t.create(e);return[Picker._.trigger(t.formats.toString,t,[Picker._.trigger(n.formatLabel,t,[e])||n.format,e]),function(u,a){r&&r.pick==a&&u.push(n.klass.selected);i&&i.pick==a&&u.push(n.klass.highlighted);s&&s.pick==a&&u.push(n.klass.viewset);o&&t.disabled(e)&&u.push(n.klass.disabled);return u.join(" ")}([n.klass.listItem],e.pick),"data-pick="+e.pick]}})+Picker._.node("li",Picker._.node("button",n.clear,n.klass.buttonClear,"data-clear=1"+(e?"":" disable"))),n.klass.list)};i.defaults=function(e){return{clear:"Clear",format:"h:i A",interval:30,klass:{picker:e+" "+e+"--time",holder:e+"__holder",list:e+"__list",listItem:e+"__list-item",disabled:e+"__list-item--disabled",selected:e+"__list-item--selected",highlighted:e+"__list-item--highlighted",viewset:e+"__list-item--viewset",now:e+"__list-item--now",buttonClear:e+"__button--clear"}}}(Picker.klasses().picker);Picker.extend("pickatime",i)})();(function(e){e.fn.each2===void 0&&e.fn.extend({each2:function(t){for(var n=e([0]),r=-1,i=this.length;i>++r&&(n.context=n[0]=this[r])&&t.call(n[0],r,n)!==!1;);return this}})})(jQuery),function(e,t){"use strict";function n(e,t){for(var n=0,r=t.length;r>n;n+=1)if(i(e,t[n]))return n;return-1}function r(){var t=e(B);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function i(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function s(t,n){var r,i,s;if(null===t||1>t.length)return[];for(r=t.split(n),i=0,s=r.length;s>i;i+=1)r[i]=e.trim(r[i]);return r}function o(e){return e.outerWidth(!1)-e.width()}function u(n){var r="keyup-change-value";n.on("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.on("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function a(n){n.on("mousemove",function(n){var r=D;(r===t||r.x!==n.pageX||r.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function f(e,n,r){r=r||t;var i;return function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function l(e){var t,n=!1;return function(){return n===!1&&(t=e(),n=!0),t}}function c(e,t){var r=f(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){n(e.target,t.get())>=0&&r(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],r=e.val().length;e.focus(),e.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(r,r):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function p(t){t=e(t)[0];var n=0,r=0;if("selectionStart"in t)n=t.selectionStart,r=t.selectionEnd-n;else if("selection"in document){t.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-r}return{offset:n,length:r}}function d(e){e.preventDefault(),e.stopPropagation()}function v(e){e.preventDefault(),e.stopImmediatePropagation()}function m(t){if(!_){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);_=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),_.attr("class","select2-sizer"),e("body").append(_)}return _.text(t.val()),_.width()}function g(t,n,r){var i,s,o=[];i=t.attr("class"),i&&(i=""+i,e(i.split(" ")).each2(function(){0===this.indexOf("select2-")&&o.push(this)})),i=n.attr("class"),i&&(i=""+i,e(i.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(s=r(this),s&&o.push(this))})),t.attr("class",o.join(" "))}function y(e,n,r,i){var s=e.toUpperCase().indexOf(n.toUpperCase()),o=n.length;return 0>s?(r.push(i(e)),t):(r.push(i(e.substring(0,s))),r.push("<span class='select2-match'>"),r.push(i(e.substring(s,s+o))),r.push("</span>"),r.push(i(e.substring(s+o,e.length))),t)}function b(n){var r,i=0,s=null,o=n.quietMillis||100,u=n.url,a=this;return function(f){window.clearTimeout(r),r=window.setTimeout(function(){i+=1;var r=i,o=n.data,l=u,c=n.transport||e.fn.select2.ajaxDefaults.transport,h={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},p=e.extend({},e.fn.select2.ajaxDefaults.params,h);o=o?o.call(a,f.term,f.page,f.context):null,l="function"==typeof l?l.call(a,f.term,f.page,f.context):l,null!==s&&s.abort(),n.params&&(e.isFunction(n.params)?e.extend(p,n.params.call(a)):e.extend(p,n.params)),e.extend(p,{url:l,dataType:n.dataType,data:o,success:function(e){if(!(i>r)){var t=n.results(e,f.page);f.callback(t)}}}),s=c.call(a,p)},o)}}function w(n){var r,i,s=n,o=function(e){return""+e.text};e.isArray(s)&&(i=s,s={results:i}),e.isFunction(s)===!1&&(i=s,s=function(){return i});var u=s();return u.text&&(o=u.text,e.isFunction(o)||(r=u.text,o=function(e){return e[r]})),function(n){var r,i=n.term,u={results:[]};return""===i?(n.callback(s()),t):(r=function(t,s){var u,a;if(t=t[0],t.children){u={};for(a in t)t.hasOwnProperty(a)&&(u[a]=t[a]);u.children=[],e(t.children).each2(function(e,t){r(t,u.children)}),(u.children.length||n.matcher(i,o(u),t))&&s.push(u)}else n.matcher(i,o(t),t)&&s.push(t)},e(s().results).each2(function(e,t){r(t,u.results)}),n.callback(u),t)}}function E(n){var r=e.isFunction(n);return function(i){var s=i.term,o={results:[]};e(r?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;(""===s||i.matcher(s,n))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o)}}function S(t){if(e.isFunction(t))return!0;if(!t)return!1;throw Error("formatterName must be a function or a falsy value")}function x(t){return e.isFunction(t)?t():t}function T(t){var n=0;return e.each(t,function(e,t){t.children?n+=T(t.children):n++}),n}function N(e,n,r,s){var o,u,a,f,l,c=e,h=!1;if(!s.createSearchChoice||!s.tokenSeparators||1>s.tokenSeparators.length)return t;for(;;){for(u=-1,a=0,f=s.tokenSeparators.length;f>a&&(l=s.tokenSeparators[a],u=e.indexOf(l),!(u>=0));a++);if(0>u)break;if(o=e.substring(0,u),e=e.substring(u+l.length),o.length>0&&(o=s.createSearchChoice(o,n),o!==t&&null!==o&&s.id(o)!==t&&null!==s.id(o))){for(h=!1,a=0,f=n.length;f>a;a++)if(i(s.id(o),s.id(n[a]))){h=!0;break}h||r(o)}}return c!==e?e:t}function C(t,n){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}if(window.Select2===t){var k,L,A,O,M,_,D,P,H,k={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case k.LEFT:case k.RIGHT:case k.UP:case k.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case k.SHIFT:case k.CTRL:case k.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},B="<div class='select2-measure-scrollbar'></div>";P=e(document),M=function(){var e=1;return function(){return e++}}(),P.on("mousemove",function(e){D={x:e.pageX,y:e.pageY}}),L=C(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,s,o,f,h=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&this.destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+M()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=l(function(){return n.element.closest("body")}),g(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(x(n.containerCss)),this.container.addClass(x(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(x(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=i=this.container.find(h),this.search=s=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),a(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",h,this.bind(this.highlightUnderEvent)),c(80,this.results),this.dropdown.on("scroll-debounced",h,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,r){var s=i.scrollTop();r>0&&0>=s-r?(i.scrollTop(0),d(e)):0>r&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),d(e))}),u(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",function(){s.addClass("select2-focused")}),s.on("blur",function(){s.removeClass("select2-focused")}),this.dropdown.on("mouseup",h,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var o=n.element.prop("disabled");o===t&&(o=!1),this.enable(!o);var f=n.element.prop("readonly");f===t&&(f=!1),this.readonly(f),H=H||r(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var e=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({tabindex:this.elementTabIndex}).prop("autofocus",this.autofocus||!1).show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:i(e.attr("locked"),"locked")}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:t},prepareOpts:function(n){var r,o,u,a,f=this;if(r=n.element,"select"===r.get(0).tagName.toLowerCase()&&(this.select=o=n.element),o&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(r,i,s){var o,u=this.opts.id;o=function(r,i,a){var l,c,h,p,d,v,m,g,y,b;for(r=n.sortResults(r,i,s),l=0,c=r.length;c>l;l+=1)h=r[l],d=h.disabled===!0,p=!d&&u(h)!==t,v=h.children&&h.children.length>0,m=e("<li></li>"),m.addClass("select2-results-dept-"+a),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),d&&m.addClass("select2-disabled"),v&&m.addClass("select2-result-with-children"),m.addClass(f.opts.formatResultCssClass(h)),g=e(document.createElement("div")),g.addClass("select2-result-label"),b=n.formatResult(h,g,s,f.opts.escapeMarkup),b!==t&&g.html(b),m.append(g),v&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),o(h.children,y,a+1),m.append(y)),m.data("select2-data",h),i.append(m)},o(i,r,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(u=n.id,n.id=function(e){return e[u]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(o?(n.query=this.bind(function(n){var i,s,o,u={results:[],more:!1},a=n.term;o=function(e,t){var r;e.is("option")?n.matcher(a,e.text(),e)&&t.push(f.optionToData(e)):e.is("optgroup")&&(r=f.optionToData(e),e.children().each2(function(e,t){o(t,r.children)}),r.children.length>0&&t.push(r))},i=r.children(),this.getPlaceholder()!==t&&i.length>0&&(s=i[0],""===e(s).text()&&(i=i.not(s))),i.each2(function(e,t){o(t,u.results)}),n.callback(u)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(a=n.element.data("ajax-url"),a&&a.length>0&&(n.ajax.url=a),n.query=b.call(n.element,n.ajax)):"data"in n?n.query=w(n.data):"tags"in n&&(n.query=E(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(e){return{id:e,text:e}}),n.initSelection===t&&(n.initSelection=function(r,o){var u=[];e(s(r.val(),n.separator)).each(function(){var r=this,s=this,o=n.tags;e.isFunction(o)&&(o=o()),e(o).each(function(){return i(this.id,r)?(s=this.text,!1):t}),u.push({id:r,text:s})}),o(u)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var e,n=this.opts.element;n.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,r=n.prop("disabled");r===t&&(r=!1),this.enable(!r);var e=n.prop("readonly");e===t&&(e=!1),this.readonly(e),g(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(x(this.opts.containerCssClass)),g(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(x(this.opts.dropdownCssClass))}),n.on("propertychange.select2 DOMAttrModified.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){return e===t&&(e=!0),this._enabled===e?!1:(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface(),!0)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,r,i,s=this.dropdown,o=this.container.offset(),u=this.container.outerHeight(!1),a=this.container.outerWidth(!1),f=s.outerHeight(!1),l=e(window).scrollLeft()+e(window).width(),c=e(window).scrollTop()+e(window).height(),h=o.top+u,p=o.left,d=c>=h+f,v=o.top-f>=this.body().scrollTop(),m=s.outerWidth(!1),g=l>=p+m,y=s.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(i=e(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),m=s.outerWidth(!1)+(i.scrollHeight===i.clientHeight?0:H.width),m>a?a=m:m=a,g=l>=p+m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),h-=t.top,p-=t.left),y?(n=!0,!v&&d&&(n=!1)):(n=!1,!d&&v&&(n=!0)),g||(p=o.left+a-m),n?(h=o.top-f,this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),r=e.extend({top:h,left:p,width:a},x(this.opts.dropdownCss)),s.css(r)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var n,r=this.containerId,i="scroll."+r,s="resize."+r,o="orientationchange."+r;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),n=e("#select2-drop-mask"),0==n.length&&(n=e(document.createElement("div")),n.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body()),n.on("mousedown touchstart",function(t){var n,r=e("#select2-drop");r.length>0&&(n=r.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.css(t()),n.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var u=this;this.container.parents().add(window).each(function(){e(this).on(s+" "+i+" "+o,function(){e("#select2-drop-mask").css(t()),u.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return x(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var n,r,i,s,o,u,a,f=this.results
;if(r=this.highlight(),!(0>r)){if(0==r)return f.scrollTop(0),t;n=this.findHighlightableChoices().find(".select2-result-label"),i=e(n[r]),s=i.offset().top+i.outerHeight(!0),r===n.length-1&&(a=f.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=f.offset().top+f.outerHeight(!0),s>o&&f.scrollTop(f.scrollTop()+(s-o)),u=i.offset().top-f.offset().top,0>u&&"none"!=i.css("display")&&f.scrollTop(f.scrollTop()+u)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),r=this.highlight();r>-1&&n.length>r;){r+=t;var i=e(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(r){var i,s,o=this.findHighlightableChoices();return 0===arguments.length?n(o.filter(".select2-highlighted")[0],o.get()):(r>=o.length&&(r=o.length-1),0>r&&(r=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),i=e(o[r]),i.addClass("select2-highlighted"),this.ensureHighlightVisible(),s=i.data("select2-data"),s&&this.opts.element.trigger({type:"select2-highlight",val:this.id(s),choice:s}),t)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else 0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),r=this.resultsPage+1,i=this,s=this.search.val(),o=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),this.opts.loadMorePadding>=e&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:r,context:o,matcher:this.opts.matcher,callback:this.bind(function(e){i.opened()&&(i.opts.populateResults.call(this,t,e.results,{term:s,page:r,context:o}),i.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).text(i.opts.formatLoadMore(r+1)),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):n.remove(),i.positionDropdown(),i.resultsPage=r,i.context=e.context)})})))},tokenize:function(){},updateResults:function(n){function r(){f.scrollTop(0),a.removeClass("select2-active"),c.positionDropdown()}function s(e){f.html(e),r()}var o,u,a=this.search,f=this.results,l=this.opts,c=this,h=a.val(),p=e.data(this.container,"select2-last-term");if((n===!0||!p||!i(h,p))&&(e.data(this.container,"select2-last-term",h),n===!0||this.showSearchInput!==!1&&this.opened())){var d=this.getMaximumSelectionSize();if(d>=1&&(o=this.data(),e.isArray(o)&&o.length>=d&&S(l.formatSelectionTooBig,"formatSelectionTooBig")))return s("<li class='select2-selection-limit'>"+l.formatSelectionTooBig(d)+"</li>"),t;if(a.val().length<l.minimumInputLength)return S(l.formatInputTooShort,"formatInputTooShort")?s("<li class='select2-no-results'>"+l.formatInputTooShort(a.val(),l.minimumInputLength)+"</li>"):s(""),n&&this.showSearch(!0),t;if(l.maximumInputLength&&a.val().length>l.maximumInputLength)return S(l.formatInputTooLong,"formatInputTooLong")?s("<li class='select2-no-results'>"+l.formatInputTooLong(a.val(),l.maximumInputLength)+"</li>"):s(""),t;l.formatSearching&&0===this.findHighlightableChoices().length&&s("<li class='select2-searching'>"+l.formatSearching()+"</li>"),a.addClass("select2-active"),u=this.tokenize(),u!=t&&null!=u&&a.val(u),this.resultsPage=1,l.query({element:l.element,term:a.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(o){var u;return this.opened()?(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==a.val()&&(u=this.opts.createSearchChoice.call(null,a.val(),o.results),u!==t&&null!==u&&c.id(u)!==t&&null!==c.id(u)&&0===e(o.results).filter(function(){return i(c.id(this),c.id(u))}).length&&o.results.unshift(u)),0===o.results.length&&S(l.formatNoMatches,"formatNoMatches")?(s("<li class='select2-no-results'>"+l.formatNoMatches(a.val())+"</li>"),t):(f.empty(),c.opts.populateResults.call(this,f,o.results,{term:a.val(),page:this.resultsPage,context:null}),o.more===!0&&S(l.formatLoadMore,"formatLoadMore")&&(f.append("<li class='select2-more-results'>"+c.opts.escapeMarkup(l.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){c.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),r(),this.opts.element.trigger({type:"select2-loaded",data:o}),t)):(this.search.removeClass("select2-active"),t)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){var t=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r&&(this.highlight(t),this.onSelect(r,e))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function n(){var n,r,i,s,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(r=n.split(";"),s=0,o=r.length;o>s;s+=1)if(i=r[s].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==i&&i.length>=1)return i[1];return n=this.opts.element.css("width"),n&&n.length>0?n:"resolve"===this.opts.width?0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var r=n.call(this);null!==r&&this.container.css("width",r)}}),A=C(L,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,n;this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),t=this.search.get(0),t.createTextRange&&(n=t.createTextRange(),n.collapse(!1),n.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var n,r=this.container,i=this.dropdown;this.showSearch(!1),this.selection=n=r.find(".select2-choice"),this.focusser=r.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+M()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===k.PAGE_UP||e.which===k.PAGE_DOWN)return d(e),t;switch(e.which){case k.UP:case k.DOWN:return this.moveHighlight(e.which===k.UP?-1:1),d(e),t;case k.ENTER:return this.selectHighlighted(),d(e),t;case k.TAB:return this.selectHighlighted({noFocus:!0}),t;case k.ESC:return this.cancel(e),d(e),t}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){return!this.isInterfaceEnabled()||e.which===k.TAB||k.isControl(e)||k.isFunctionKey(e)||e.which===k.ESC?t:this.opts.openOnEnter===!1&&e.which===k.ENTER?(d(e),t):e.which==k.DOWN||e.which==k.UP||e.which==k.ENTER&&this.opts.openOnEnter?(this.open(),d(e),t):e.which==k.DELETE||e.which==k.BACKSPACE?(this.opts.allowClear&&this.clear(),d(e),t):t})),u(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){e.stopPropagation(),this.opened()||this.open()})),n.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),v(e),this.close(),this.selection.focus())})),n.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),d(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),n.on("focus",this.bind(function(e){d(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");t&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.updateSelection([]),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=e.find(":selected");t(n.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var s=n.val(),o=null;t.query({matcher:function(e,n,r){var u=i(s,t.id(r));return u&&(o=r),u},callback:e.isFunction(r)?function(){r(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(""===this.opts.element.val()&&e!==t){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,n,r){var s=0,o=this;if(this.findHighlightableChoices().each2(function(e,n){return i(o.id(n.data("select2-data")),o.opts.element.val())?(s=e,!1):t}),r!==!1&&this.highlight(s),n===!0&&this.showSearchInput===!1){var u=this.opts.minimumResultsForSearch;u>=0&&this.showSearch(T(e.results)>=u)}},showSearch:function(t){this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t)},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),i(n,this.id(e))||this.triggerChange({added:e,removed:r})}},updateSelection:function(e){var n,r=this.selection.find("span");this.selection.data("select2-data",e),r.empty(),n=this.opts.formatSelection(e,r),n!==t&&r.append(this.opts.escapeMarkup(n)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,r=null,i=this,s=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return r=i.optionToData(t),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:s});else{if(this.opts.initSelection===t)throw Error("cannot call val() if initSelection() is not defined");if(!e&&0!==e)return this.clear(n),t;this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e,n){var r;return 0===arguments.length?(r=this.selection.data("select2-data"),r==t&&(r=null),r):(e&&""!==e?(r=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:r})):this.clear(n),t)}}),O=C(L,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var r=[];e.find(":selected").each2(function(e,t){r.push(n.optionToData(t))}),t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var o=s(n.val(),t.separator),u=[];t.query({matcher:function(n,r,s){var a=e.grep(o,function(e){return i(e,t.id(s))}).length;return a&&u.push(s),a},callback:e.isFunction(r)?function(){for(var e=[],n=0;o.length>n;n++)for(var s=o[n],a=0;u.length>a;a++){var f=u[a];if(i(s,t.id(f))){e.push(f),u.splice(a,1);break}}r(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},initContainer:function(){var n,r=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=n=this.container.find(r);var i=this;this.selection.on("mousedown",".select2-search-choice",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+M()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var r=n.find(".select2-search-choice-focus"),i=r.prev(".select2-search-choice:not(.select2-locked)"),s=r.next(".select2-search-choice:not(.select2-locked)"),o=p(this.search);if(!(!r.length||e.which!=k.LEFT&&e.which!=k.RIGHT&&e.which!=k.BACKSPACE&&e.which!=k.DELETE&&e.which!=k.ENTER)){var u=r;return e.which==k.LEFT&&i.length?u=i:e.which==k.RIGHT?u=s.length?s:null:e.which===k.BACKSPACE?(this.unselect(r.first()),this.search.width(10),u=i.length?i:s):e.which==k.DELETE?(this.unselect(r.first()),this.search.width(10),u=s.length?s:null):e.which==k.ENTER&&(u=null),this.selectChoice(u),d(e),u&&u.length||this.open(),t}if((e.which===k.BACKSPACE&&1==this.keydowns||e.which==k.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(n.find(".select2-search-choice:not(.select2-locked)").last()),d(e),t;if(this.selectChoice(null),this.opened())switch(e.which){case k.UP:case k.DOWN:return this.moveHighlight(e.which===k.UP?-1:1),d(e),t;case k.ENTER:return this.selectHighlighted(),d(e),t;case k.TAB:return this.selectHighlighted({noFocus:!0}),t;case k.ESC:return this.cancel(e),d(e),t}if(e.which!==k.TAB&&!k.isControl(e)&&!k.isFunctionKey(e)&&e.which!==k.BACKSPACE&&e.which!==k.ESC){if(e.which===k.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===k.PAGE_UP||e.which===k.PAGE_DOWN)&&d(e),e.which===k.ENTER&&d(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("mousedown",r,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",r,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var r=[],i=[],s=this;e(t).each(function(){0>n(s.id(this),r)&&(r.push(s.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){s.addSelectedChoice(this)}),s.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r,i=!n.locked,s=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=e("<li class='select2-search-choice select2-locked'><div></div></li>"),u=i?s:o,a=this.id(n),f=this.getVal();r=this.opts.formatSelection(n,u.find("div")),r!=t&&u.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(r)+"'>"+this.opts.escapeMarkup(r)+"</div>"),i&&u.find(".select2-search-choice-close").on("mousedown",d).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),d(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),u.data("select2-data",n),u.insertBefore(this.searchContainer),f.push(a),this.setVal(f)},unselect:function(e){var t,r,i=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(r=n(this.id(t),i),r>=0&&(i.splice(r,1),this.setVal(i),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(e,t,r){var i=this.getVal(),s=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),u=this;s.each2(function(e,t){var r=u.id(t.data("select2-data"));n(r,i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&r!==!1&&u.highlight(0),!this.opts.createSearchChoice&&!s.filter(".select2-result:not(.select2-selected)").length>0&&this.results.append("<li class='select2-no-results'>"+u.opts.formatNoMatches(u.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-o(this.search)},resizeSearch:function(){var e,t,n,r,i,s=o(this.search);e=m(this.search)+10,t=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(t-r)-s,e>i&&(i=n-s),40>i&&(i=n-s),0>=i&&(i=e),this.search.width(i)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var r;this.select?this.select.val(t):(r=[],e(t).each(function(){0>n(this,r)&&r.push(this)}),this.opts.element.val(0===r.length?"":r.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;t.length>n;n++)for(var r=0;e.length>r;r++)i(this.opts.id(t[n]),this.opts.id(e[r]))&&(t.splice(n,1),n--,e.splice(r,1),r--);return{added:t,removed:e}},val:function(n,r){var i,s=this;if(0===arguments.length)return this.getVal();if(i=this.data(),i.length||(i=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),r&&this.triggerChange({added:this.data(),removed:i}),t;if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===t)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e(t).map(s.id);s.setVal(n),s.updateSelection(t),s.clearSearch(),r&&s.triggerChange(this.buildChangeDetails(i,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(n,r){var i,s,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(s=this.data(),n||(n=[]),i=e.map(n,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(n),this.clearSearch(),r&&this.triggerChange(this.buildChangeDetails(s,this.data())),t)}}),e.fn.select2=function(){var r,i,s,o,u=Array.prototype.slice.call(arguments,0),a=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","readonly","positionDropdown","data"],f=["val","opened","isFocused","container","data"];return this.each(function(){if(0===u.length||"object"==typeof u[0])r=0===u.length?{}:e.extend({},u[0]),r.element=e(this),"select"===r.element.get(0).tagName.toLowerCase()?o=r.element.prop("multiple"):(o=r.multiple||!1,"tags"in r&&(r.multiple=o=!0)),i=o?new O:new A,i.init(r);else{if("string"!=typeof u[0])throw"Invalid arguments to select2 plugin: "+u;if(0>n(u[0],a))throw"Unknown method: "+u[0];if(s=t,i=e(this).data("select2"),i===t)return;if(s="container"===u[0]?i.container:i[u[0]].apply(i,u.slice(1)),n(u[0],f)>=0)return!1}}),s===t?this:s},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return y(e.text,n.term,i,r),i.join("")},formatSelection:function(e){return e?e.text:t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:N,escapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return(e+"").replace(/[&<>"'\/\\]/g,function(e){return t[e]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:b,local:w,tags:E},util:{debounce:f,markMatch:y},"class":{"abstract":L,single:A,multi:O}}}}(jQuery);(function(e){"use strict";e.extend(e.fn.select2.defaults,{formatNoMatches:function(){return"Совпадений не найдено"},formatInputTooShort:function(e,t){var n=t-e.length;return"Пожалуйста, введите еще "+n+" символ"+(n==1?"":n>1&&n<5?"а":"ов")},formatInputTooLong:function(e,t){var n=e.length-t;return"Пожалуйста, введите на "+n+" символ"+(n==1?"":n>1&&n<5?"а":"ов")+" меньше"},formatSelectionTooBig:function(e){return"Вы можете выбрать не более "+e+" элемент"+(e==1?"а":"ов")},formatLoadMore:function(e){return"Загрузка данных..."},formatSearching:function(){return"Поиск..."}})})(jQuery);