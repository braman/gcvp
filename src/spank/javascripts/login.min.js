function onMessage(e){console.log("has _onMessage:"+(typeof _onMessage=="function"));if(templateLoaded&&typeof _onMessage=="function"){_onMessage(e)}else{var t={};try{t=JSON.parse(e)}catch(n){console.warn("Got non-JSON:"+e)}console.log(t);if(t.template){_group=t.group;var r=t.template.replace(/&(lt|gt|quot|apos);/g,function(e,t){return t=="lt"?"<":t=="gt"?">":t=="apos"?"'":'"'});_template=r;jQuery("#body").html(r);var i=Mustache.render(_template,_ru);jQuery("#body").html(i);if(typeof _init=="function"){_init(t)}jQuery("#body").show();templateLoaded=true;console.log("template")}else if(t.url){_group=t.group;var r="";jQuery("#body").load(t.url,function(e){console.log(t.url);console.log(t);if(typeof _init=="function"){console.log("_initStarted");_init(t)}jQuery("#body").show()});console.log("url");templateLoaded=true}}}function onStatus(e){console.log(ruStatuses[e]);if(e=="AUTHFAIL"){jQuery("#login_error").text("Логин или пароль не верны.")}else{jQuery("#login_error").text("")}if(e=="CONNECTED"||e=="ATTACHED"){jQuery("#loginPanel").hide();XmppClient.send("queue","init");jQuery("#userPanel .username").text(sessionStorage.jid.replace("@cq.b2e.kz",""));jQuery("#userPanel").show()}if(e=="DISCONNECTED"){jQuery("#containerPanel").empty();templateLoaded=false}if(e=="SIDEXPIRED"){jQuery("#containerPanel").html(_containerPanel);templateLoaded=false}if(templateLoaded&&typeof _onStatus=="function"){_onStatus(e)}}var templateLoaded=false;var _group="";var _bot=false;var _locale="ru";var _template="";var _containerPanel="";var group=null;var myHost="cq.b2e.kz";var localHost="localhost:9090";var mili=0;var _datadata=null;jQuery(document).ready(function(){if(sessionStorage.getItem("xmpp-jid")!=null){XmppClient.connect(sessionStorage.getItem("xmpp-jid"),sessionStorage.getItem("xmpp-pwd"))}$("#main li a").click(function(e){e.preventDefault();$("html,body").animate({scrollTop:$(this.hash).offset().top-30},500)});$("#cloudqueue-menu li a,#company-menu li a,#buying-menu li a,#support-menu li a").click(function(e){e.preventDefault();$("html,body").animate({scrollTop:$(this.hash).offset().top-110},500)});jQuery("#loginBtn").click(function(e){var t=jQuery("#loginField").val();t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var n=jQuery("#passwordField").val();console.log("loginBtn");XmppClient.connect(t,n);return false});jQuery("#passwordField").keyup(function(e){if(e.which==13){jQuery("#loginBtn").click()}})});_containerPanel=jQuery("#body").html()