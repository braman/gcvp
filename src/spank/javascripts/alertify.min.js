(function(e,t){"use strict";var n=e.document,r;r=function(){var r={},i={},s=false,o={ENTER:13,ESC:27,SPACE:32},u=[],a,f,l,c,h,p,d,v,m,g,y,b;i={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<a href="#" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</a>',cancel:'<a href="#" class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</a>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'};b=function(){var e,r,i=false,s=n.createElement("fakeelement"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(e in o){if(s.style[e]!==t){r=o[e];i=true;break}}return{type:r,supported:i}};a=function(e){return n.getElementById(e)};r={labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:false,buttonFocus:"ok",transition:t,addListeners:function(e){var t=typeof l!=="undefined",r=typeof f!=="undefined",i=typeof y!=="undefined",s="",u=this,a,h,p,d,v;a=function(t){if(typeof t.preventDefault!=="undefined")t.preventDefault();p(t);if(typeof y!=="undefined")s=y.value;if(typeof e==="function"){if(typeof y!=="undefined"){e(true,s)}else e(true)}return false};h=function(t){if(typeof t.preventDefault!=="undefined")t.preventDefault();p(t);if(typeof e==="function")e(false);return false};p=function(e){u.hide();u.unbind(n.body,"keyup",d);u.unbind(c,"focus",v);if(i)u.unbind(g,"submit",a);if(t)u.unbind(l,"click",a);if(r)u.unbind(f,"click",h)};d=function(e){var t=e.keyCode;if(t===o.SPACE&&!i)a(e);if(t===o.ESC&&r)h(e)};v=function(e){if(i)y.focus();else if(!r||u.buttonReverse)l.focus();else f.focus()};this.bind(c,"focus",v);if(t)this.bind(l,"click",a);if(r)this.bind(f,"click",h);this.bind(n.body,"keyup",d);if(i)this.bind(g,"submit",a);if(!this.transition.supported){this.setFocus()}},bind:function(e,t,n){if(typeof e.addEventListener==="function"){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}},handleErrors:function(){if(typeof e.onerror!=="undefined"){var t=this;e.onerror=function(e,n,r){t.error("["+e+" on line "+r+" of "+n+"]",0)};return true}else{return false}},appendButtons:function(e,t){return this.buttonReverse?t+e:e+t},build:function(e){var t="",n=e.type,s=e.message,o=e.cssClass||"";t+='<div class="alertify-dialog">';if(r.buttonFocus==="none")t+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>';if(n==="prompt")t+='<form id="alertify-form">';t+='<article class="alertify-inner">';t+=i.message.replace("{{message}}",s);if(n==="prompt")t+=i.input;t+=i.buttons.holder;t+="</article>";if(n==="prompt")t+="</form>";t+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>';t+="</div>";switch(n){case"confirm":t=t.replace("{{buttons}}",this.appendButtons(i.buttons.cancel,i.buttons.ok));t=t.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":t=t.replace("{{buttons}}",this.appendButtons(i.buttons.cancel,i.buttons.submit));t=t.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":t=t.replace("{{buttons}}",i.buttons.ok);t=t.replace("{{ok}}",this.labels.ok);break;default:break}v.className="alertify alertify-"+n+" "+o;d.className="alertify-cover";return t},close:function(e,t){var n=t&&!isNaN(t)?+t:this.delay,r=this,i,s;this.bind(e,"click",function(){i(e)});s=function(e){e.stopPropagation();r.unbind(this,r.transition.type,s);m.removeChild(this);if(!m.hasChildNodes())m.className+=" alertify-logs-hidden"};i=function(e){if(typeof e!=="undefined"&&e.parentNode===m){if(r.transition.supported){r.bind(e,r.transition.type,s);e.className+=" alertify-log-hide"}else{m.removeChild(e);if(!m.hasChildNodes())m.className+=" alertify-logs-hidden"}}};if(t===0)return;setTimeout(function(){i(e)},n)},dialog:function(e,t,r,i,o){p=n.activeElement;var a=function(){if(m&&m.scrollTop!==null&&d&&d.scrollTop!==null)return;else a()};if(typeof e!=="string")throw new Error("message must be a string");if(typeof t!=="string")throw new Error("type must be a string");if(typeof r!=="undefined"&&typeof r!=="function")throw new Error("fn must be a function");if(typeof this.init==="function"){this.init();a()}u.push({type:t,message:e,callback:r,placeholder:i,cssClass:o});if(!s)this.setup();return this},extend:function(e){if(typeof e!=="string")throw new Error("extend method must have exactly one paramter");return function(t,n){this.log(t,e,n);return this}},hide:function(){var e,t=this;u.splice(0,1);if(u.length>0)this.setup(true);else{s=false;e=function(n){n.stopPropagation();v.className+=" alertify-isHidden";t.unbind(v,t.transition.type,e)};if(this.transition.supported){this.bind(v,this.transition.type,e);v.className="alertify alertify-hide alertify-hidden"}else{v.className="alertify alertify-hide alertify-hidden alertify-isHidden"}d.className="alertify-cover alertify-cover-hidden";p.focus()}},init:function(){n.createElement("nav");n.createElement("article");n.createElement("section");d=n.createElement("div");d.setAttribute("id","alertify-cover");d.className="alertify-cover alertify-cover-hidden";n.body.appendChild(d);v=n.createElement("section");v.setAttribute("id","alertify");v.className="alertify alertify-hidden";n.body.appendChild(v);m=n.createElement("section");m.setAttribute("id","alertify-logs");m.className="alertify-logs alertify-logs-hidden";n.body.appendChild(m);n.body.setAttribute("tabindex","0");this.transition=b();delete this.init},log:function(e,t,n){var r=function(){if(m&&m.scrollTop!==null)return;else r()};if(typeof this.init==="function"){this.init();r()}m.className="alertify-logs";this.notify(e,t,n);return this},notify:function(e,t,r){var i=n.createElement("article");i.className="alertify-log"+(typeof t==="string"&&t!==""?" alertify-log-"+t:"");i.innerHTML=e;m.appendChild(i);setTimeout(function(){i.className=i.className+" alertify-log-show"},50);this.close(i,r)},set:function(e){var t;if(typeof e!=="object"&&e instanceof Array)throw new Error("args must be an object");for(t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}},setFocus:function(){if(y){y.focus();y.select()}else h.focus()},setup:function(e){var n=u[0],i=this,o;s=true;o=function(e){e.stopPropagation();i.setFocus();i.unbind(v,i.transition.type,o)};if(this.transition.supported&&!e){this.bind(v,this.transition.type,o)}v.innerHTML=this.build(n);c=a("alertify-resetFocus");l=a("alertify-ok")||t;f=a("alertify-cancel")||t;h=r.buttonFocus==="cancel"?f:r.buttonFocus==="none"?a("alertify-noneFocus"):l,y=a("alertify-text")||t;g=a("alertify-form")||t;if(typeof n.placeholder==="string"&&n.placeholder!=="")y.value=n.placeholder;if(e)this.setFocus();this.addListeners(n.callback)},unbind:function(e,t,n){if(typeof e.removeEventListener==="function"){e.removeEventListener(t,n,false)}else if(e.detachEvent){e.detachEvent("on"+t,n)}}};return{alert:function(e,t,n){r.dialog(e,"alert",t,"",n);return this},confirm:function(e,t,n){r.dialog(e,"confirm",t,"",n);return this},extend:r.extend,init:r.init,log:function(e,t,n){r.log(e,t,n);return this},prompt:function(e,t,n,i){r.dialog(e,"prompt",t,n,i);return this},success:function(e,t){r.log(e,"success",t);return this},error:function(e,t){r.log(e,"error",t);return this},set:function(e){r.set(e)},labels:r.labels,debug:r.handleErrors}};if(typeof define==="function"){define([],function(){return new r})}else if(typeof e.alertify==="undefined"){e.alertify=new r}})(this)